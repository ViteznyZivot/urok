<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ãšroky bez Å½argonu - BleskovÃ½ Minikurz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .flip-card {
            perspective: 1000px;
            height: 120px;
        }
        
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        
        .flip-card-back {
            transform: rotateY(180deg);
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .celebration {
            animation: bounce 0.6s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            80% { transform: translateY(-5px); }
        }
        
        .drag-item {
            cursor: grab;
            transition: all 0.3s ease;
        }
        
        .drag-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }
        
        .drop-zone {
            min-height: 60px;
            transition: all 0.3s ease;
        }
        
        .drop-zone.drag-over {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }
        
        .slider-container {
            position: relative;
        }
        
        .slider-track {
            height: 8px;
            background: linear-gradient(to right, #ef4444, #f59e0b, #10b981);
            border-radius: 4px;
        }
        
        .bonus-card {
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .compound-animation {
            animation: grow 2s ease-in-out infinite;
        }
        
        @keyframes grow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .pulse-animation {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        
        .shake-animation {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .glow-animation {
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            to { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .economic-particle {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 3s ease-out forwards;
        }
        
        @keyframes particle-float {
            0% { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }
        
        .rate-change-indicator {
            position: absolute;
            top: -20px;
            right: 10px;
            font-weight: bold;
            font-size: 18px;
            animation: indicator-fade 2s ease-out forwards;
        }
        
        @keyframes indicator-fade {
            0% { 
                transform: translateY(0);
                opacity: 1;
            }
            100% { 
                transform: translateY(-30px);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">ğŸ’° Ãšroky bez Å½argonu</h1>
                    <p class="text-sm text-gray-600">BleskovÃ½ minikurz pro zaÄÃ¡teÄnÃ­ky</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-600">Pokrok</div>
                    <div class="w-24 bg-gray-200 rounded-full h-2">
                        <div id="overall-progress" class="progress-bar bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="overall-percentage">0%</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-6">
        <!-- Course Overview -->
        <div id="overview" class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">ğŸš€</div>
                <h2 class="text-3xl font-bold text-gray-900 mb-4">VÃ­tejte v kurzu!</h2>
                <p class="text-lg text-gray-700 mb-6">Za 30â€“45 minut zÃ­skÃ¡te praktickÃ© nÃ¡stroje pro rozhodovÃ¡nÃ­ o ÃºrocÃ­ch, spoÅ™enÃ­ a dluzÃ­ch. Bez Å¾argonu, s kalkulaÄkami a interaktivnÃ­mi prvky!</p>
                
                <div class="grid md:grid-cols-5 gap-4 mb-6">
                    <div class="lesson-overview bg-blue-50 rounded-lg p-4 text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="startLesson(1)">
                        <div class="text-2xl mb-2">âš¡</div>
                        <div class="font-semibold text-sm">Lekce 1</div>
                        <div class="text-xs text-gray-600">Ãšrok v 60 vteÅ™inÃ¡ch</div>
                        <div class="text-xs mt-1" id="lesson1-overview-status">ğŸ”’ NezaÄato</div>
                    </div>
                    <div class="lesson-overview bg-green-50 rounded-lg p-4 text-center cursor-pointer hover:bg-green-100 transition-colors" onclick="startLesson(2)">
                        <div class="text-2xl mb-2">ğŸ¦</div>
                        <div class="font-semibold text-sm">Lekce 2</div>
                        <div class="text-xs text-gray-600">Jak sazby vznikajÃ­</div>
                        <div class="text-xs mt-1" id="lesson2-overview-status">ğŸ”’ NezaÄato</div>
                    </div>
                    <div class="lesson-overview bg-yellow-50 rounded-lg p-4 text-center cursor-pointer hover:bg-yellow-100 transition-colors" onclick="startLesson(3)">
                        <div class="text-2xl mb-2">ğŸ’³</div>
                        <div class="font-semibold text-sm">Lekce 3</div>
                        <div class="text-xs text-gray-600">RPSN bez lupy</div>
                        <div class="text-xs mt-1" id="lesson3-overview-status">ğŸ”’ NezaÄato</div>
                    </div>
                    <div class="lesson-overview bg-purple-50 rounded-lg p-4 text-center cursor-pointer hover:bg-purple-100 transition-colors" onclick="startLesson(4)">
                        <div class="text-2xl mb-2">ğŸ“ˆ</div>
                        <div class="font-semibold text-sm">Lekce 4</div>
                        <div class="text-xs text-gray-600">SloÅ¾enÃ© kouzlo</div>
                        <div class="text-xs mt-1" id="lesson4-overview-status">ğŸ”’ NezaÄato</div>
                    </div>
                    <div class="lesson-overview bg-red-50 rounded-lg p-4 text-center cursor-pointer hover:bg-red-100 transition-colors" onclick="startLesson(5)">
                        <div class="text-2xl mb-2">ğŸ¯</div>
                        <div class="font-semibold text-sm">Lekce 5</div>
                        <div class="text-xs text-gray-600">Strategie v praxi</div>
                        <div class="text-xs mt-1" id="lesson5-overview-status">ğŸ”’ NezaÄato</div>
                    </div>
                </div>
                
                <!-- What You'll Gain -->
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-blue-50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">ğŸ¯</div>
                        <h4 class="font-semibold text-blue-800 mb-1">RozumÃ­m sazbÃ¡m</h4>
                        <p class="text-sm text-blue-700">NominÃ¡lnÃ­ vs. reÃ¡lnÃ© Ãºroky, inflace</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">ğŸ’³</div>
                        <h4 class="font-semibold text-green-800 mb-1">ÄŒtu RPSN</h4>
                        <p class="text-sm text-green-700">SkuteÄnÃ¡ cena pÅ¯jÄek a ÃºvÄ›rÅ¯</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">âš–ï¸</div>
                        <h4 class="font-semibold text-purple-800 mb-1">UmÃ­m rozhodnout</h4>
                        <p class="text-sm text-purple-700">SplÃ¡cet vs. investovat, strategie</p>
                    </div>
                </div>
                
                <button onclick="startLesson(1)" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105">
                    ZaÄÃ­t kurz! ğŸš€
                </button>
            </div>
        </div>

        <!-- Lesson 1 -->
        <div id="lesson-1" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">âš¡ Lekce 1: Ãšrok v 60 vteÅ™inÃ¡ch</h2>
                    <p class="text-gray-600">Ãšrok = cena penÄ›z v Äase. RozliÅ¡Ã­m nominÃ¡lnÃ­ Ã— reÃ¡lnou sazbu.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson1-progress" class="progress-bar bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson1-progress-text">0/4 dokonÄeno</div>
                </div>
            </div>

            <!-- What is Interest Explanation -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 mb-6 border-l-4 border-blue-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ¤”</span>
                    Co je to vlastnÄ› Ãºrok?
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">ğŸ’°</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">JednoduÅ¡e Å™eÄeno:</h4>
                                <p class="text-gray-700">Ãšrok je <strong>cena za pÅ¯jÄenÃ­ penÄ›z</strong>. KdyÅ¾ si pÅ¯jÄujete, platÃ­te Ãºrok. KdyÅ¾ pÅ¯jÄujete (spoÅ™Ã­te), Ãºrok dostÃ¡vate.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-green-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">ğŸ“ˆ</span>
                                <h4 class="font-semibold text-green-800">KdyÅ¾ spoÅ™Ã­te</h4>
                            </div>
                            <p class="text-green-700 text-sm">Banka vÃ¡m platÃ­ Ãºrok za to, Å¾e jÃ­ pÅ¯jÄujete svÃ© penÃ­ze. VaÅ¡e Ãºspory rostou.</p>
                        </div>
                        
                        <div class="bg-red-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">ğŸ“‰</span>
                                <h4 class="font-semibold text-red-800">KdyÅ¾ si pÅ¯jÄujete</h4>
                            </div>
                            <p class="text-red-700 text-sm">PlatÃ­te bance Ãºrok za to, Å¾e vÃ¡m pÅ¯jÄila penÃ­ze. Dluh roste.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Personal Calculator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ’° OsobnÃ­ kalkulaÄka: "Kolik mÄ› dnes stojÃ­ 10 000 KÄ za rok?"</h3>
                    <button onclick="skipSection(1, 'calculator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">ÃšrokovÃ¡ sazba (%)</label>
                        <input type="number" id="interest-rate" value="5" min="0" max="20" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Inflace (%)</label>
                        <input type="number" id="inflation-rate" value="3" min="0" max="15" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Doba (roky)</label>
                        <input type="number" id="time-period" value="1" min="1" max="30" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                <button onclick="calculateInterest()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    VypoÄÃ­tat
                </button>
                <div id="interest-result" class="mt-4 p-4 bg-white rounded-lg hidden">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600" id="nominal-value">-</div>
                            <div class="text-sm text-gray-600">NominÃ¡lnÃ­ hodnota</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="real-value">-</div>
                            <div class="text-sm text-gray-600">ReÃ¡lnÃ¡ hodnota</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inflation Slider -->
            <div class="bg-yellow-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ“Š Slider: PosuÅˆ inflaci â†’ uvidÃ­Å¡ reÃ¡lnÃ© %</h3>
                    <button onclick="skipSection(1, 'slider')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="slider-container mb-4">
                    <input type="range" id="inflation-slider" min="0" max="15" value="3" step="0.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-track">
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>0%</span>
                        <span>7.5%</span>
                        <span>15%</span>
                    </div>
                </div>
                <div class="text-center">
                    <div class="text-sm text-gray-600">Inflace: <span id="current-inflation" class="font-semibold">3%</span></div>
                    <div class="text-sm text-gray-600">NominÃ¡lnÃ­ sazba: <span class="font-semibold">5%</span></div>
                    <div class="text-lg font-bold text-green-600">ReÃ¡lnÃ¡ sazba: <span id="real-rate">2.0%</span></div>
                </div>
            </div>

            <!-- Flip Cards -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ”„ MÃ½ty vs. Fakta - Klepni pro odhalenÃ­ pravdy</h3>
                    <button onclick="skipSection(1, 'flip-cards')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="flip-card" onclick="flipCard(this, 1)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-red-100 border-2 border-red-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">âŒ</div>
                                    <div class="font-semibold text-sm">MÃTUS</div>
                                    <div class="text-xs">"NejvyÅ¡Å¡Ã­ sazba je vÅ¾dy nejlepÅ¡Ã­"</div>
                                </div>
                            </div>
                            <div class="flip-card-back bg-green-100 border-2 border-green-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">âœ…</div>
                                    <div class="font-semibold text-xs">FAKT: ZÃ¡leÅ¾Ã­ na reÃ¡lnÃ© sazbÄ›! VysokÃ¡ nominÃ¡lnÃ­ sazba pÅ™i jeÅ¡tÄ› vyÅ¡Å¡Ã­ inflaci = ztrÃ¡ta kupnÃ­ sÃ­ly.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flip-card" onclick="flipCard(this, 1)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-red-100 border-2 border-red-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">âŒ</div>
                                    <div class="font-semibold text-sm">MÃTUS</div>
                                    <div class="text-xs">"Inflace je pro dluÅ¾nÃ­ky Å¡patnÃ¡"</div>
                                </div>
                            </div>
                            <div class="flip-card-back bg-green-100 border-2 border-green-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">âœ…</div>
                                    <div class="font-semibold text-xs">FAKT: Inflace sniÅ¾uje reÃ¡lnou hodnotu dluhu! DluÅ¾nÃ­ci s fixnÃ­ sazbou pÅ™i rÅ¯stu inflace profitujÃ­.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- APR vs EAR Box -->
            <div class="bg-orange-50 rounded-lg p-6 mb-6 border-l-4 border-orange-500">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ”¢</span>
                    NominÃ¡lnÃ­ vs. EfektivnÃ­ roÄnÃ­ sazba (EAR)
                </h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-semibold text-orange-800 mb-2">ğŸ“Š NominÃ¡lnÃ­ sazba (APR)</h4>
                            <p class="text-sm text-gray-700 mb-2">12% roÄnÄ› = 1% mÄ›sÃ­ÄnÄ›</p>
                            <p class="text-xs text-gray-600">JednoduchÃ© nÃ¡sobenÃ­, bez sloÅ¾enÃ©ho ÃºroÄenÃ­</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-green-800 mb-2">ğŸš€ EfektivnÃ­ sazba (EAR)</h4>
                            <p class="text-sm text-gray-700 mb-2">12% s mÄ›sÃ­ÄnÃ­ kapitalizacÃ­ = 12,68%</p>
                            <p class="text-xs text-gray-600">SkuteÄnÃ½ vÃ½nos vÄetnÄ› sloÅ¾enÃ©ho ÃºroÄenÃ­</p>
                        </div>
                    </div>
                </div>
                <div class="bg-yellow-100 rounded-lg p-3">
                    <p class="text-sm text-yellow-800">
                        ğŸ’¡ <strong>PÅ™Ã­klad:</strong> SpoÅ™icÃ­ ÃºÄet "12% roÄnÄ›" s mÄ›sÃ­ÄnÃ­m pÅ™ipisovÃ¡nÃ­m ÃºrokÅ¯ ve skuteÄnosti vydÄ›lÃ¡ 12,68% za rok dÃ­ky sloÅ¾enÃ©mu ÃºroÄenÃ­!
                    </p>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-purple-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ§  Mikro-kvÃ­z</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(1)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            ğŸ”„ Restart
                        </button>
                        <button onclick="skipSection(1, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            PÅ™eskoÄit â†’
                        </button>
                    </div>
                </div>
                <div id="quiz-1" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">MÃ¡m Ãºspory s 4% Ãºrokem. Inflace je 6%. Co se dÄ›je s mou kupnÃ­ silou?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(1, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) Roste o 4%
                            </button>
                            <button onclick="answerQuiz(1, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) KlesÃ¡ o 2%
                            </button>
                            <button onclick="answerQuiz(1, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) ZÅ¯stÃ¡vÃ¡ stejnÃ¡
                            </button>
                        </div>
                        <div id="quiz-1-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">âœ… SprÃ¡vnÄ›! ReÃ¡lnÃ¡ sazba = 4% - 6% = -2%. VaÅ¡e penÃ­ze ztrÃ¡cejÃ­ kupnÃ­ sÃ­lu.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="showOverview()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    â† ZpÄ›t na pÅ™ehled
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(1)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        PÅ™eskoÄit lekci
                    </button>
                    <button id="next-lesson-1" onclick="startLesson(2)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        DalÅ¡Ã­ lekce â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 2 -->
        <div id="lesson-2" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">ğŸ¦ Lekce 2: Jak sazby vznikajÃ­</h2>
                    <p class="text-gray-600">CentrÃ¡lnÃ­ banka, riziko, konkurence. PochopÃ­m, proÄ mÃ¡ kaÅ¾dÃ½ jinou sazbu.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson2-progress" class="progress-bar bg-green-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson2-progress-text">0/4 dokonÄeno</div>
                </div>
            </div>

            <!-- Central Bank Explanation -->
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 mb-6 border-l-4 border-green-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ›ï¸</span>
                    CentrÃ¡lnÃ­ banka = dirigent orchestru
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">ğŸ¼</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">ZÃ¡kladnÃ­ sazba ÄŒNB:</h4>
                                <p class="text-gray-700">Toto je "nota", podle kterÃ© hrajÃ­ vÅ¡echny banky. KdyÅ¾ ÄŒNB zvÃ½Å¡Ã­ sazbu, vÅ¡echny ostatnÃ­ sazby jdou nahoru.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-blue-100 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">ğŸ“ˆ</div>
                            <h4 class="font-semibold text-blue-800 mb-1">VysokÃ¡ inflace</h4>
                            <p class="text-blue-700 text-sm">ÄŒNB zvÃ½Å¡Ã­ sazby â†’ draÅ¾Å¡Ã­ pÅ¯jÄky â†’ mÃ©nÄ› utrÃ¡cenÃ­ â†’ niÅ¾Å¡Ã­ inflace</p>
                        </div>
                        
                        <div class="bg-red-100 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">ğŸ“‰</div>
                            <h4 class="font-semibold text-red-800 mb-1">Recese</h4>
                            <p class="text-red-700 text-sm">ÄŒNB snÃ­Å¾Ã­ sazby â†’ levnÄ›jÅ¡Ã­ pÅ¯jÄky â†’ vÃ­ce investic â†’ rÅ¯st ekonomiky</p>
                        </div>
                        
                        <div class="bg-green-100 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">âš–ï¸</div>
                            <h4 class="font-semibold text-green-800 mb-1">RovnovÃ¡ha</h4>
                            <p class="text-green-700 text-sm">CÃ­l: 2% inflace a stabilnÃ­ ekonomika</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Risk Calculator -->
            <div class="bg-orange-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">âš ï¸ KalkulaÄka rizika: "ProÄ mÃ¡ kaÅ¾dÃ½ jinou sazbu?"</h3>
                    <button onclick="skipSection(2, 'risk-calculator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">Vyberte profil klienta:</h4>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="client-type" value="safe" class="text-green-600" onchange="calculateRisk()">
                                <span>ğŸŸ¢ BezpeÄnÃ½ (stÃ¡lÃ½ pÅ™Ã­jem, Å¾Ã¡dnÃ© dluhy)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="client-type" value="medium" class="text-yellow-600" onchange="calculateRisk()">
                                <span>ğŸŸ¡ StÅ™ednÃ­ riziko (prÅ¯mÄ›rnÃ½ pÅ™Ã­jem, malÃ© dluhy)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="client-type" value="risky" class="text-red-600" onchange="calculateRisk()">
                                <span>ğŸ”´ RizikovÃ½ (nestÃ¡lÃ½ pÅ™Ã­jem, vysokÃ© dluhy)</span>
                            </label>
                        </div>
                    </div>
                    <div id="risk-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-2">VaÅ¡e sazba:</h4>
                        <div class="text-3xl font-bold mb-2" id="client-rate">-</div>
                        <div class="text-sm text-gray-600" id="risk-explanation">-</div>
                    </div>
                </div>
            </div>

            <!-- Fixed vs Variable Rates -->
            <div class="bg-purple-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ”„ FixnÃ­ vs. VariabilnÃ­ sazby</h3>
                    <button onclick="skipSection(2, 'rate-types')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">ğŸ”’ FixnÃ­ sazba</h4>
                        <p class="text-sm text-gray-700 mb-2">Sazba se nemÄ›nÃ­ po celou dobu fixace</p>
                        <div class="text-xs text-gray-600">
                            âœ… Jistota vÃ½Å¡e splÃ¡tky<br>
                            âŒ NemÅ¯Å¾ete profitovat z poklesu sazeb
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-green-800 mb-2">ğŸ“ˆ VariabilnÃ­ sazba</h4>
                        <p class="text-sm text-gray-700 mb-2">MÄ›nÃ­ se podle zÃ¡kladnÃ­ sazby ÄŒNB</p>
                        <div class="text-xs text-gray-600">
                            âœ… MÅ¯Å¾ete profitovat z poklesu sazeb<br>
                            âŒ Riziko rÅ¯stu splÃ¡tky
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg p-4">
                    <h4 class="font-semibold mb-3">ğŸ® SimulÃ¡tor: ZmÄ›na zÃ¡kladnÃ­ sazby ÄŒNB</h4>
                    <div class="flex items-center space-x-4 mb-3">
                        <span class="text-sm">ZÃ¡kladnÃ­ sazba ÄŒNB:</span>
                        <input type="range" id="cnb-rate" min="0" max="10" value="2" step="0.5" class="flex-1">
                        <span id="cnb-rate-display" class="font-semibold">2.0%</span>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div class="text-center">
                            <div class="font-semibold">FixnÃ­ hypotÃ©ka</div>
                            <div class="text-lg font-bold text-blue-600">4.5%</div>
                            <div class="text-xs text-gray-600">SplÃ¡tka: 25 000 KÄ</div>
                        </div>
                        <div class="text-center">
                            <div class="font-semibold">VariabilnÃ­ hypotÃ©ka</div>
                            <div class="text-lg font-bold text-green-600" id="variable-rate">4.5%</div>
                            <div class="text-xs text-gray-600" id="variable-payment">SplÃ¡tka: 25 000 KÄ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bank Competition Game -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ Hra: Konkurence bank</h3>
                    <button onclick="skipSection(2, 'competition-game')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <p class="text-sm text-gray-600 mb-4">KliknÄ›te na banky a sledujte, jak se mÄ›nÃ­ sazby podle konkurence!</p>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="bank-card bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-blue-500 transition-colors" onclick="toggleBank('bank1')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">ğŸ¦</div>
                            <div class="font-semibold">Banka A</div>
                            <div class="text-lg font-bold text-blue-600" id="bank1-rate">5.5%</div>
                            <div class="text-xs text-gray-500" id="bank1-status">AktivnÃ­</div>
                        </div>
                    </div>
                    <div class="bank-card bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-blue-500 transition-colors" onclick="toggleBank('bank2')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">ğŸ›ï¸</div>
                            <div class="font-semibold">Banka B</div>
                            <div class="text-lg font-bold text-green-600" id="bank2-rate">5.2%</div>
                            <div class="text-xs text-gray-500" id="bank2-status">AktivnÃ­</div>
                        </div>
                    </div>
                    <div class="bank-card bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-blue-500 transition-colors" onclick="toggleBank('bank3')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">ğŸ¢</div>
                            <div class="font-semibold">Banka C</div>
                            <div class="text-lg font-bold text-purple-600" id="bank3-rate">5.8%</div>
                            <div class="text-xs text-gray-500" id="bank3-status">AktivnÃ­</div>
                        </div>
                    </div>
                </div>
                <div id="competition-result" class="bg-white rounded-lg p-4 text-center">
                    <div class="text-sm text-gray-600">PrÅ¯mÄ›rnÃ¡ sazba na trhu: <span id="average-rate" class="font-bold">5.5%</span></div>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-yellow-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ§  KvÃ­z: Kdo urÄuje sazby?</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(2)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            ğŸ”„ Restart
                        </button>
                        <button onclick="skipSection(2, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            PÅ™eskoÄit â†’
                        </button>
                    </div>
                </div>
                <div id="quiz-2" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">ÄŒNB zvÃ½Å¡Ã­ zÃ¡kladnÃ­ sazbu z 2% na 4%. Co se stane se sazbami hypotÃ©k?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(2, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) ZÅ¯stanou stejnÃ©
                            </button>
                            <button onclick="answerQuiz(2, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) TakÃ© porostou
                            </button>
                            <button onclick="answerQuiz(2, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) Poklesnou
                            </button>
                        </div>
                        <div id="quiz-2-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">âœ… SprÃ¡vnÄ›! KdyÅ¾ ÄŒNB zvÃ½Å¡Ã­ sazbu, banky si pÅ¯jÄujÃ­ drÃ¡Å¾, takÅ¾e i hypotÃ©ky zdraÅ¾ujÃ­.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(1)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    â† PÅ™edchozÃ­ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(2)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        PÅ™eskoÄit lekci
                    </button>
                    <button id="next-lesson-2" onclick="startLesson(3)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        DalÅ¡Ã­ lekce â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 3 -->
        <div id="lesson-3" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">ğŸ’³ Lekce 3: RPSN bez lupy</h2>
                    <p class="text-gray-600">RoÄnÃ­ procentnÃ­ sazba nÃ¡kladÅ¯ = skuteÄnÃ¡ cena pÅ¯jÄky vÄetnÄ› vÅ¡ech poplatkÅ¯.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson3-progress" class="progress-bar bg-yellow-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson3-progress-text">0/4 dokonÄeno</div>
                </div>
            </div>

            <!-- RPSN Explanation -->
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6 mb-6 border-l-4 border-yellow-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ”</span>
                    RPSN = PravdivÃ¡ cena pÅ¯jÄky
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">ğŸ’¡</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">ProÄ RPSN?</h4>
                                <p class="text-gray-700">ÃšrokovÃ¡ sazba vÃ¡m neÅ™ekne celou pravdu. RPSN zahrnuje <strong>vÅ¡echny nÃ¡klady</strong> - poplatky, pojiÅ¡tÄ›nÃ­, vedenÃ­ ÃºÄtu...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">âŒ</span>
                                <h4 class="font-semibold text-red-800">Jen ÃºrokovÃ¡ sazba</h4>
                            </div>
                            <p class="text-red-700 text-sm">PÅ¯jÄka 5% - vypadÃ¡ levnÄ›, ale co poplatky za vyÅ™Ã­zenÃ­, pojiÅ¡tÄ›nÃ­, vedenÃ­ ÃºÄtu?</p>
                        </div>
                        
                        <div class="bg-green-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">âœ…</span>
                                <h4 class="font-semibold text-green-800">RPSN</h4>
                            </div>
                            <p class="text-green-700 text-sm">RPSN 8,5% - to je skuteÄnÃ¡ cena vÄetnÄ› vÅ¡ech skrytÃ½ch nÃ¡kladÅ¯!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RPSN Calculator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ§® RPSN kalkulaÄka: Odhalte skrytÃ© nÃ¡klady</h3>
                    <button onclick="skipSection(3, 'rpsn-calculator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">VÃ½Å¡e pÅ¯jÄky (KÄ)</label>
                            <input type="number" id="loan-amount" value="100000" min="10000" max="5000000" step="10000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">ÃšrokovÃ¡ sazba (%)</label>
                            <input type="number" id="loan-rate" value="5" min="1" max="25" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Doba splatnosti (roky)</label>
                            <input type="number" id="loan-years" value="5" min="1" max="30" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Poplatek za vyÅ™Ã­zenÃ­ (KÄ)</label>
                            <input type="number" id="setup-fee" value="2000" min="0" max="50000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">MÄ›sÃ­ÄnÃ­ poplatek (KÄ)</label>
                            <input type="number" id="monthly-fee" value="50" min="0" max="500" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="calculateRPSN()" class="w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            VypoÄÃ­tat RPSN
                        </button>
                    </div>
                    <div id="rpsn-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">VÃ½sledek:</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>ÃšrokovÃ¡ sazba:</span>
                                <span id="display-rate" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold text-red-600">
                                <span>RPSN:</span>
                                <span id="calculated-rpsn">-</span>
                            </div>
                            <div class="text-sm text-gray-600 mt-3">
                                <div>CelkovÃ© nÃ¡klady: <span id="total-cost" class="font-semibold">-</span></div>
                                <div>MÄ›sÃ­ÄnÃ­ splÃ¡tka: <span id="monthly-payment" class="font-semibold">-</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loan Comparison -->
            <div class="bg-green-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">âš–ï¸ PorovnÃ¡nÃ­ nabÃ­dek: KterÃ¡ je skuteÄnÄ› levnÄ›jÅ¡Ã­?</h3>
                    <button onclick="skipSection(3, 'loan-comparison')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-green-500 transition-colors" onclick="selectLoan('loan1')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">ğŸ¦</div>
                            <div class="font-semibold">Banka A</div>
                            <div class="text-sm text-gray-600">Ãšrok: 4,5%</div>
                            <div class="text-sm text-gray-600">Poplatek: 5 000 KÄ</div>
                            <div class="text-lg font-bold text-blue-600" id="loan1-rpsn">RPSN: ?</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-green-500 transition-colors" onclick="selectLoan('loan2')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">ğŸ›ï¸</div>
                            <div class="font-semibold">Banka B</div>
                            <div class="text-sm text-gray-600">Ãšrok: 6,0%</div>
                            <div class="text-sm text-gray-600">Poplatek: 0 KÄ</div>
                            <div class="text-lg font-bold text-green-600" id="loan2-rpsn">RPSN: ?</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-green-500 transition-colors" onclick="selectLoan('loan3')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">ğŸ¢</div>
                            <div class="font-semibold">Banka C</div>
                            <div class="text-sm text-gray-600">Ãšrok: 5,2%</div>
                            <div class="text-sm text-gray-600">Poplatek: 1 500 KÄ</div>
                            <div class="text-lg font-bold text-purple-600" id="loan3-rpsn">RPSN: ?</div>
                        </div>
                    </div>
                </div>
                <div id="comparison-result" class="bg-white rounded-lg p-4 text-center hidden">
                    <div class="text-lg font-semibold mb-2">VÃ½sledek porovnÃ¡nÃ­:</div>
                    <div id="best-loan" class="text-green-600 font-bold">-</div>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-purple-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ§  KvÃ­z: RPSN vs. ÃºrokovÃ¡ sazba</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(3)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            ğŸ”„ Restart
                        </button>
                        <button onclick="skipSection(3, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            PÅ™eskoÄit â†’
                        </button>
                    </div>
                </div>
                <div id="quiz-3" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">PÅ¯jÄka A: 4% Ãºrok + 3000 KÄ poplatek. PÅ¯jÄka B: 5% Ãºrok + 0 KÄ poplatek. KterÃ¡ je levnÄ›jÅ¡Ã­?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(3, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) PÅ¯jÄka A (niÅ¾Å¡Ã­ Ãºrok)
                            </button>
                            <button onclick="answerQuiz(3, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) ZÃ¡leÅ¾Ã­ na RPSN
                            </button>
                            <button onclick="answerQuiz(3, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) PÅ¯jÄka B (bez poplatkÅ¯)
                            </button>
                        </div>
                        <div id="quiz-3-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">âœ… SprÃ¡vnÄ›! RPSN zahrnuje vÅ¡echny nÃ¡klady, takÅ¾e jen podle nÄ›j poznÃ¡te skuteÄnÄ› levnÄ›jÅ¡Ã­ pÅ¯jÄku.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(2)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    â† PÅ™edchozÃ­ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(3)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        PÅ™eskoÄit lekci
                    </button>
                    <button id="next-lesson-3" onclick="startLesson(4)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        DalÅ¡Ã­ lekce â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 4 -->
        <div id="lesson-4" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">ğŸ“ˆ Lekce 4: SloÅ¾enÃ© kouzlo</h2>
                    <p class="text-gray-600">SloÅ¾enÃ© ÃºroÄenÃ­ = "osmÃ½ div svÄ›ta". ÄŒas je vÃ¡Å¡ nejlepÅ¡Ã­ pÅ™Ã­tel.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson4-progress" class="progress-bar bg-purple-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson4-progress-text">0/4 dokonÄeno</div>
                </div>
            </div>

            <!-- Compound Interest Explanation -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 mb-6 border-l-4 border-purple-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸª„</span>
                    SloÅ¾enÃ© ÃºroÄenÃ­ = kouzlo Äasu
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">ğŸ’«</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">Jak to funguje?</h4>
                                <p class="text-gray-700">NezÃ­skÃ¡vÃ¡te Ãºrok jen z pÅ¯vodnÃ­ ÄÃ¡stky, ale i <strong>z dÅ™Ã­ve zÃ­skanÃ½ch ÃºrokÅ¯</strong>. Ãšroky "rodÃ­" dalÅ¡Ã­ Ãºroky!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">ğŸ“Š</span>
                                <h4 class="font-semibold text-red-800">JednoduchÃ© ÃºroÄenÃ­</h4>
                            </div>
                            <p class="text-red-700 text-sm">10 000 KÄ Ã— 5% = 500 KÄ roÄnÄ›. Po 10 letech: 15 000 KÄ</p>
                        </div>
                        
                        <div class="bg-green-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">ğŸš€</span>
                                <h4 class="font-semibold text-green-800">SloÅ¾enÃ© ÃºroÄenÃ­</h4>
                            </div>
                            <p class="text-green-700 text-sm">10 000 KÄ Ã— 5% sloÅ¾enÄ›. Po 10 letech: 16 289 KÄ!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mini Visualization -->
            <div class="bg-indigo-50 rounded-lg p-6 mb-6 border-l-4 border-indigo-500">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ“Š</span>
                    Vizualizace: PÅ™Ã­mka vs. KÅ™ivka
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-red-800 mb-2">ğŸ“ˆ JednoduchÃ© ÃºroÄenÃ­</h4>
                        <div class="h-20 bg-gradient-to-r from-red-200 to-red-400 rounded flex items-end">
                            <div class="w-full h-1 bg-red-600"></div>
                        </div>
                        <p class="text-xs text-gray-600 mt-2">LineÃ¡rnÃ­ rÅ¯st - stÃ¡le stejnÃ½ pÅ™Ã­rÅ¯stek</p>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-green-800 mb-2">ğŸš€ SloÅ¾enÃ© ÃºroÄenÃ­</h4>
                        <div class="h-20 bg-gradient-to-r from-green-200 to-green-400 rounded flex items-end">
                            <div class="w-full h-4 bg-green-600 rounded-tl-full"></div>
                        </div>
                        <p class="text-xs text-gray-600 mt-2">ExponenciÃ¡lnÃ­ rÅ¯st - zrychluje se Äasem</p>
                    </div>
                </div>
            </div>

            <!-- Compound Interest Simulator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ® SimulÃ¡tor: Sledujte, jak penÃ­ze rostou</h3>
                    <button onclick="skipSection(4, 'compound-simulator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">PoÄÃ¡teÄnÃ­ vklad (KÄ)</label>
                            <input type="number" id="initial-amount" value="10000" min="1000" max="1000000" step="1000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">MÄ›sÃ­ÄnÃ­ vklad (KÄ)</label>
                            <input type="number" id="monthly-deposit" value="1000" min="0" max="50000" step="100" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">RoÄnÃ­ Ãºrok (%)</label>
                            <input type="number" id="compound-rate" value="6" min="0" max="15" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Doba spoÅ™enÃ­ (roky)</label>
                            <input type="range" id="years-slider" min="1" max="40" value="10" class="w-full">
                            <div class="text-center text-sm text-gray-600">
                                <span id="years-display">10</span> let
                            </div>
                        </div>
                        <button onclick="runCompoundSimulation()" class="w-full bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            Spustit simulaci
                        </button>
                    </div>
                    <div id="compound-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">VÃ½sledek po <span id="result-years">10</span> letech:</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>VloÅ¾eno celkem:</span>
                                <span id="total-invested" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ZÃ­skanÃ© Ãºroky:</span>
                                <span id="total-interest" class="font-semibold text-green-600">-</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold text-purple-600">
                                <span>CelkovÃ¡ hodnota:</span>
                                <span id="final-amount">-</span>
                            </div>
                            <div class="mt-4 p-3 bg-yellow-100 rounded-lg">
                                <div class="text-sm text-yellow-800">
                                    ğŸ’¡ <span id="compound-insight">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rule of 72 -->
            <div class="bg-green-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ¯ Pravidlo 72: Kdy se penÃ­ze zdvojnÃ¡sobÃ­?</h3>
                    <button onclick="skipSection(4, 'rule-72')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">ğŸ§®</div>
                        <div class="text-lg font-semibold">72 Ã· ÃºrokovÃ¡ sazba = roky do zdvojnÃ¡sobenÃ­</div>
                    </div>
                </div>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="calculateRule72(3)">
                        <div class="text-2xl mb-2">ğŸŒ</div>
                        <div class="font-semibold">3% Ãºrok</div>
                        <div class="text-lg font-bold text-red-600" id="rule72-3">24 let</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="calculateRule72(6)">
                        <div class="text-2xl mb-2">ğŸš¶</div>
                        <div class="font-semibold">6% Ãºrok</div>
                        <div class="text-lg font-bold text-yellow-600" id="rule72-6">12 let</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="calculateRule72(9)">
                        <div class="text-2xl mb-2">ğŸƒ</div>
                        <div class="font-semibold">9% Ãºrok</div>
                        <div class="text-lg font-bold text-green-600" id="rule72-9">8 let</div>
                    </div>
                </div>
                <div id="rule72-explanation" class="mt-4 p-3 bg-blue-100 rounded-lg hidden">
                    <div class="text-sm text-blue-800">
                        <span id="rule72-text">-</span>
                    </div>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-orange-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ§  KvÃ­z: SÃ­la sloÅ¾enÃ©ho ÃºroÄenÃ­</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(4)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            ğŸ”„ Restart
                        </button>
                        <button onclick="skipSection(4, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            PÅ™eskoÄit â†’
                        </button>
                    </div>
                </div>
                <div id="quiz-4" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">MÃ¡te 100 000 KÄ s 8% roÄnÃ­m Ãºrokem. Za kolik let se zdvojnÃ¡sobÃ­?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(4, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) 12,5 let (100 000 Ã· 8 000)
                            </button>
                            <button onclick="answerQuiz(4, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) 9 let (pravidlo 72)
                            </button>
                            <button onclick="answerQuiz(4, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) 8 let (stejnÄ› jako Ãºrok)
                            </button>
                        </div>
                        <div id="quiz-4-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">âœ… SprÃ¡vnÄ›! Pravidlo 72: 72 Ã· 8 = 9 let. SloÅ¾enÃ© ÃºroÄenÃ­ je rychlejÅ¡Ã­ neÅ¾ jednoduchÃ© poÄÃ­tÃ¡nÃ­!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(3)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    â† PÅ™edchozÃ­ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(4)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        PÅ™eskoÄit lekci
                    </button>
                    <button id="next-lesson-4" onclick="startLesson(5)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        DalÅ¡Ã­ lekce â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 5 -->
        <div id="lesson-5" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">ğŸ¯ Lekce 5: Strategie v praxi</h2>
                    <p class="text-gray-600">KonkrÃ©tnÃ­ kroky pro spoÅ™enÃ­, investovÃ¡nÃ­ a splÃ¡cenÃ­ dluhÅ¯.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson5-progress" class="progress-bar bg-red-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson5-progress-text">0/4 dokonÄeno</div>
                </div>
            </div>

            <!-- Strategy Framework -->
            <div class="bg-gradient-to-r from-red-50 to-pink-50 rounded-lg p-6 mb-6 border-l-4 border-red-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ—ºï¸</span>
                    FinanÄnÃ­ strategie krok za krokem
                </h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="text-2xl mb-2">1ï¸âƒ£</div>
                        <h4 class="font-semibold text-gray-900 mb-2">NouzovÃ½ fond</h4>
                        <p class="text-gray-700 text-sm">3-6 mÄ›sÃ­ÄnÃ­ch vÃ½dajÅ¯ na spoÅ™icÃ­m ÃºÄtu s rychlÃ½m pÅ™Ã­stupem</p>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <div class="text-2xl mb-2">2ï¸âƒ£</div>
                        <h4 class="font-semibold text-gray-900 mb-2">Splatit dluhy</h4>
                        <p class="text-gray-700 text-sm">NejdÅ™Ã­ve vysokoÃºroÄenÃ© dluhy (kreditky, rychlÃ© pÅ¯jÄky)</p>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <div class="text-2xl mb-2">3ï¸âƒ£</div>
                        <h4 class="font-semibold text-gray-900 mb-2">Investovat</h4>
                        <p class="text-gray-700 text-sm">DlouhodobÃ© spoÅ™enÃ­ s vyÅ¡Å¡Ã­m vÃ½nosem</p>
                    </div>
                </div>
            </div>

            <!-- Debt Psychology -->
            <div class="bg-pink-50 rounded-lg p-6 mb-6 border-l-4 border-pink-500">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ğŸ§ </span>
                    Psychologie splÃ¡cenÃ­ dluhÅ¯
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">â„ï¸ Debt Snowball (snÄ›hovÃ¡ koule)</h4>
                        <p class="text-sm text-gray-700 mb-2">SplÃ¡cejte nejdÅ™Ã­ve nejmenÅ¡Ã­ dluhy</p>
                        <div class="text-xs text-gray-600">
                            âœ… RychlÃ© ÃºspÄ›chy = motivace<br>
                            âœ… Psychologicky snazÅ¡Ã­<br>
                            âŒ Matematicky ne vÅ¾dy optimÃ¡lnÃ­
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-red-800 mb-2">ğŸ”ï¸ Debt Avalanche (lavina)</h4>
                        <p class="text-sm text-gray-700 mb-2">SplÃ¡cejte nejdÅ™Ã­ve nejvyÅ¡Å¡Ã­ Ãºroky</p>
                        <div class="text-xs text-gray-600">
                            âœ… Matematicky optimÃ¡lnÃ­<br>
                            âœ… UÅ¡etÅ™Ã­te nejvÃ­c penÄ›z<br>
                            âŒ PomalejÅ¡Ã­ psychologickÃ© uspokojenÃ­
                        </div>
                    </div>
                </div>
                <div class="bg-yellow-100 rounded-lg p-3 mt-4">
                    <p class="text-sm text-yellow-800">
                        ğŸ’¡ <strong>Tip:</strong> Vyberte si metodu podle svÃ© osobnosti. PotÅ™ebujete motivaci? Snowball. Chcete uÅ¡etÅ™it maximum? Avalanche.
                    </p>
                </div>
            </div>

            <!-- Debt vs Investment Calculator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">âš–ï¸ RozhodovaÄ: SplÃ¡cet nebo investovat?</h3>
                    <button onclick="skipSection(5, 'debt-investment')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Ãšrok na dluhu (%)</label>
                            <input type="number" id="debt-rate" value="8" min="1" max="30" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">OÄekÃ¡vanÃ½ vÃ½nos investice (%)</label>
                            <input type="number" id="investment-return" value="6" min="1" max="20" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">DostupnÃ¡ ÄÃ¡stka (KÄ)</label>
                            <input type="number" id="available-money" value="50000" min="1000" max="1000000" step="1000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="calculateDebtVsInvestment()" class="w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Co je lepÅ¡Ã­?
                        </button>
                    </div>
                    <div id="debt-investment-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">DoporuÄenÃ­:</h4>
                        <div id="recommendation" class="text-lg font-bold mb-3">-</div>
                        <div id="recommendation-explanation" class="text-sm text-gray-600 mb-3">-</div>
                        <div class="space-y-2 text-sm">
                            <div>Ãšspora za rok pÅ™i splÃ¡cenÃ­: <span id="debt-savings" class="font-semibold">-</span></div>
                            <div>Zisk za rok pÅ™i investovÃ¡nÃ­: <span id="investment-gain" class="font-semibold">-</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Savings Goal Planner -->
            <div class="bg-green-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ¯ PlÃ¡novaÄ cÃ­lÅ¯: Jak dosÃ¡hnout svÃ©ho snu?</h3>
                    <button onclick="skipSection(5, 'savings-planner')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        PÅ™eskoÄit â†’
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">VÃ¡Å¡ cÃ­l</label>
                            <select id="savings-goal" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" onchange="updateGoalAmount()">
                                <option value="car">Auto (500 000 KÄ)</option>
                                <option value="house">DÅ¯m (2 000 000 KÄ)</option>
                                <option value="vacation">DovolenÃ¡ (50 000 KÄ)</option>
                                <option value="custom">VlastnÃ­ ÄÃ¡stka</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">CÃ­lovÃ¡ ÄÃ¡stka (KÄ)</label>
                            <input type="number" id="goal-amount" value="500000" min="10000" max="10000000" step="10000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Za kolik let chcete dosÃ¡hnout cÃ­le?</label>
                            <input type="number" id="goal-years" value="5" min="1" max="30" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">OÄekÃ¡vanÃ½ roÄnÃ­ vÃ½nos (%)</label>
                            <input type="number" id="goal-return" value="5" min="0" max="15" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="calculateSavingsGoal()" class="w-full bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            VypoÄÃ­tat plÃ¡n
                        </button>
                    </div>
                    <div id="savings-goal-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">VÃ¡Å¡ spoÅ™icÃ­ plÃ¡n:</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>CÃ­l:</span>
                                <span id="display-goal" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Doba:</span>
                                <span id="display-years" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold text-green-600">
                                <span>MÄ›sÃ­ÄnÃ­ vklad:</span>
                                <span id="monthly-savings">-</span>
                            </div>
                            <div class="mt-4 p-3 bg-blue-100 rounded-lg">
                                <div class="text-sm text-blue-800">
                                    ğŸ’¡ <span id="savings-tip">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Quiz -->
            <div class="bg-yellow-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">ğŸ† ZÃ¡vÄ›reÄnÃ½ test: Jste pÅ™ipraveni?</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(5)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            ğŸ”„ Restart
                        </button>
                        <button onclick="skipSection(5, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            PÅ™eskoÄit â†’
                        </button>
                    </div>
                </div>
                <div id="quiz-5" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">MÃ¡te 20 000 KÄ navÃ­c. Dluh na kreditce 15% vs. investice s oÄekÃ¡vanÃ½m vÃ½nosem 7%. Co udÄ›lÃ¡te?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(5, 'A', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) SplatÃ­m dluh (15% > 7%)
                            </button>
                            <button onclick="answerQuiz(5, 'B', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) Investujem (diverzifikace)
                            </button>
                            <button onclick="answerQuiz(5, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) PÅ¯l na pÅ¯l
                            </button>
                        </div>
                        <div id="quiz-5-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">âœ… SprÃ¡vnÄ›! VÅ¾dy nejdÅ™Ã­ve splaÅ¥te vysokoÃºroÄenÃ© dluhy. GarantovanÃ¡ "Ãºspora" 15% je lepÅ¡Ã­ neÅ¾ nejistÃ½ vÃ½nos 7%.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Central Bank Game -->
            <div id="central-bank-game" class="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-6 mb-6 hidden border-2 border-indigo-300">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4 animate-bounce">ğŸ›ï¸</div>
                    <h3 class="text-3xl font-bold text-gray-900 mb-4">ğŸ® Hra: Jste guvernÃ©r ÄŒNB!</h3>
                    <p class="text-lg text-gray-700 mb-4">Rozhodujte o ÃºrokovÃ½ch sazbÃ¡ch a sledujte, jak reaguje ekonomika!</p>
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <div class="text-sm text-gray-600 mb-2">VÃ¡Å¡ cÃ­l: UdrÅ¾et inflaci kolem 2% a ekonomiku stabilnÃ­</div>
                        <div class="flex justify-center space-x-6">
                            <div class="text-center">
                                <div class="text-lg font-bold text-blue-600" id="game-inflation">3.5%</div>
                                <div class="text-xs text-gray-500">Inflace</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-green-600" id="game-growth">2.1%</div>
                                <div class="text-xs text-gray-500">RÅ¯st HDP</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-purple-600" id="game-unemployment">4.2%</div>
                                <div class="text-xs text-gray-500">NezamÄ›stnanost</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="bg-white rounded-lg p-6 mb-6">
                    <div class="text-center mb-4">
                        <h4 class="text-xl font-semibold mb-2">ZÃ¡kladnÃ­ ÃºrokovÃ¡ sazba ÄŒNB</h4>
                        <div class="text-4xl font-bold text-indigo-600 mb-4" id="current-cnb-rate">2.0%</div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button onclick="changeCNBRate(-0.5)" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                ğŸ“‰ SnÃ­Å¾it o 0.5%
                            </button>
                            <button onclick="changeCNBRate(-0.25)" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                ğŸ“‰ -0.25%
                            </button>
                            <button onclick="changeCNBRate(0.25)" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                ğŸ“ˆ +0.25%
                            </button>
                            <button onclick="changeCNBRate(0.5)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                ğŸ“ˆ ZvÃ½Å¡it o 0.5%
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Economic Indicators with Animations -->
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-white rounded-lg p-4 border-2 border-transparent transition-all duration-500" id="inflation-card">
                        <div class="text-center">
                            <div class="text-3xl mb-2" id="inflation-emoji">ğŸ”¥</div>
                            <h4 class="font-semibold text-gray-900 mb-2">Inflace</h4>
                            <div class="text-2xl font-bold mb-2" id="inflation-display">3.5%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                                <div class="bg-red-500 h-2 rounded-full transition-all duration-1000" id="inflation-bar" style="width: 70%"></div>
                            </div>
                            <div class="text-xs text-gray-600" id="inflation-status">Nad cÃ­lem</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border-2 border-transparent transition-all duration-500" id="growth-card">
                        <div class="text-center">
                            <div class="text-3xl mb-2" id="growth-emoji">ğŸ“ˆ</div>
                            <h4 class="font-semibold text-gray-900 mb-2">RÅ¯st HDP</h4>
                            <div class="text-2xl font-bold mb-2" id="growth-display">2.1%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                                <div class="bg-green-500 h-2 rounded-full transition-all duration-1000" id="growth-bar" style="width: 42%"></div>
                            </div>
                            <div class="text-xs text-gray-600" id="growth-status">ZdravÃ½ rÅ¯st</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border-2 border-transparent transition-all duration-500" id="unemployment-card">
                        <div class="text-center">
                            <div class="text-3xl mb-2" id="unemployment-emoji">ğŸ‘¥</div>
                            <h4 class="font-semibold text-gray-900 mb-2">NezamÄ›stnanost</h4>
                            <div class="text-2xl font-bold mb-2" id="unemployment-display">4.2%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                                <div class="bg-yellow-500 h-2 rounded-full transition-all duration-1000" id="unemployment-bar" style="width: 42%"></div>
                            </div>
                            <div class="text-xs text-gray-600" id="unemployment-status">PÅ™ijatelnÃ¡</div>
                        </div>
                    </div>
                </div>

                <!-- Market Reactions -->
                <div class="bg-white rounded-lg p-6 mb-6">
                    <h4 class="text-lg font-semibold mb-4 text-center">ğŸ“Š Reakce trhu</h4>
                    <div class="grid md:grid-cols-4 gap-4">
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="housing-market">
                            <div class="text-2xl mb-2">ğŸ </div>
                            <div class="font-semibold text-sm">HypotÃ©ky</div>
                            <div class="text-lg font-bold" id="mortgage-rate">4.5%</div>
                            <div class="text-xs" id="housing-trend">ğŸ“ˆ Rostou</div>
                        </div>
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="savings-market">
                            <div class="text-2xl mb-2">ğŸ’°</div>
                            <div class="font-semibold text-sm">SpoÅ™enÃ­</div>
                            <div class="text-lg font-bold" id="savings-rate">2.8%</div>
                            <div class="text-xs" id="savings-trend">ğŸ“ˆ Rostou</div>
                        </div>
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="business-market">
                            <div class="text-2xl mb-2">ğŸ¢</div>
                            <div class="font-semibold text-sm">PodnikÃ¡nÃ­</div>
                            <div class="text-lg font-bold" id="business-loans">6.2%</div>
                            <div class="text-xs" id="business-trend">ğŸ“ˆ DraÅ¾Å¡Ã­</div>
                        </div>
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="currency-market">
                            <div class="text-2xl mb-2">ğŸ’±</div>
                            <div class="font-semibold text-sm">Koruna</div>
                            <div class="text-lg font-bold" id="currency-strength">+0.5%</div>
                            <div class="text-xs" id="currency-trend">ğŸ’ª SilnÄ›jÅ¡Ã­</div>
                        </div>
                    </div>
                </div>

                <!-- Game Events -->
                <div id="game-events" class="bg-yellow-50 rounded-lg p-4 mb-6 hidden border-l-4 border-yellow-500">
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl" id="event-emoji">âš¡</div>
                        <div>
                            <h4 class="font-semibold text-yellow-800 mb-1">EkonomickÃ¡ udÃ¡lost!</h4>
                            <p class="text-sm text-yellow-700" id="event-text">NÄ›co se dÄ›je v ekonomice...</p>
                        </div>
                    </div>
                </div>

                <!-- Score and Feedback -->
                <div class="bg-white rounded-lg p-6 mb-6">
                    <div class="text-center">
                        <h4 class="text-lg font-semibold mb-4">ğŸ† VaÅ¡e hodnocenÃ­</h4>
                        <div class="flex justify-center space-x-8 mb-4">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600" id="game-score">85</div>
                                <div class="text-sm text-gray-600">SkÃ³re</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600" id="game-quarters">1</div>
                                <div class="text-sm text-gray-600">ÄŒtvrtletÃ­</div>
                            </div>
                        </div>
                        <div class="bg-gray-200 rounded-full h-3 mb-2">
                            <div class="bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-1000" id="score-bar" style="width: 85%"></div>
                        </div>
                        <div class="text-sm text-gray-600" id="performance-feedback">DobrÃ¡ prÃ¡ce! Ekonomika je stabilnÃ­.</div>
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="text-center">
                    <button onclick="resetGame()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg mr-4 transition-colors">
                        ğŸ”„ Restart hry
                    </button>
                    <button onclick="nextQuarter()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2 rounded-lg font-semibold transition-all transform hover:scale-105">
                        â­ï¸ DalÅ¡Ã­ ÄtvrtletÃ­
                    </button>
                </div>
            </div>

            <!-- Course Completion -->
            <div id="course-completion" class="bg-gradient-to-r from-green-100 to-blue-100 rounded-lg p-6 mb-6 hidden">
                <div class="text-center">
                    <div class="text-6xl mb-4">ğŸ‰</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Gratulujeme! Kurz dokonÄen!</h3>
                    <p class="text-lg text-gray-700 mb-6">NynÃ­ mÃ¡te praktickÃ© nÃ¡stroje pro chytrÃ© rozhodovÃ¡nÃ­ o penÄ›zÃ­ch. PouÅ¾Ã­vejte je!</p>
                    <div class="grid md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-white rounded-lg p-4">
                            <div class="text-2xl mb-2">âœ…</div>
                            <div class="font-semibold">RozumÃ­te ÃºrokÅ¯m</div>
                            <div class="text-sm text-gray-600">NominÃ¡lnÃ­ vs. reÃ¡lnÃ© sazby</div>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <div class="text-2xl mb-2">âœ…</div>
                            <div class="font-semibold">ZnÃ¡te RPSN</div>
                            <div class="text-sm text-gray-600">SkuteÄnÃ¡ cena pÅ¯jÄek</div>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <div class="text-2xl mb-2">âœ…</div>
                            <div class="font-semibold">OvlÃ¡dÃ¡te sloÅ¾enÃ© ÃºroÄenÃ­</div>
                            <div class="text-sm text-gray-600">SÃ­la Äasu a trpÄ›livosti</div>
                        </div>
                    </div>
                    <button onclick="startCentralBankGame()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold text-lg transition-all transform hover:scale-105 mb-4">
                        ğŸ® Zahrajte si na centrÃ¡lnÃ­ banku!
                    </button>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(4)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    â† PÅ™edchozÃ­ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(5)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        PÅ™eskoÄit lekci
                    </button>
                    <button id="finish-course" onclick="finishCourse()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        DokonÄit kurz! ğŸ‰
                    </button>
                </div>
            </div>
        </div>

        <!-- Bonus Card (appears randomly) -->
        <div id="bonus-card" class="bonus-card fixed top-20 right-4 bg-yellow-400 text-black p-4 rounded-lg shadow-lg hidden z-40 max-w-xs">
            <div class="flex items-center justify-between mb-2">
                <div class="font-bold">ğŸ Bonus tip!</div>
                <button onclick="closeBonusCard()" class="text-black hover:text-gray-700">âœ•</button>
            </div>
            <div id="bonus-content" class="text-sm">
                ğŸ’¡ VÄ›dÄ›li jste, Å¾e Albert Einstein nazval sloÅ¾enÃ© ÃºroÄenÃ­ "osmÃ½m divem svÄ›ta"?
            </div>
        </div>

        <!-- Achievement Badge -->
        <div id="achievement-badge" class="fixed bottom-4 right-4 bg-green-500 text-white p-4 rounded-full shadow-lg hidden z-40">
            <div class="text-2xl">ğŸ†</div>
        </div>
    </main>

    <script>
        let currentLesson = 0;
        let lessonProgress = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
        let completedActions = {1: [], 2: [], 3: [], 4: [], 5: []};
        let streak = 0;
        let bonusShown = false;
        let flippedCards = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};

        function startLesson(lessonNum) {
            currentLesson = lessonNum;
            document.getElementById('overview').classList.add('hidden');
            document.querySelectorAll('.lesson').forEach(l => l.classList.add('hidden'));
            document.getElementById(`lesson-${lessonNum}`).classList.remove('hidden');
            
            // Update lesson status in overview
            updateLessonOverviewStatus(lessonNum, 'started');
            
            // Reset lesson progress if starting fresh
            if (lessonProgress[lessonNum] === 0) {
                updateLessonProgress(lessonNum);
            }
        }

        function showOverview() {
            document.querySelectorAll('.lesson').forEach(l => l.classList.add('hidden'));
            document.getElementById('overview').classList.remove('hidden');
            currentLesson = 0;
        }

        function updateLessonProgress(lessonNum) {
            const progress = lessonProgress[lessonNum];
            const progressBar = document.getElementById(`lesson${lessonNum}-progress`);
            const progressText = document.getElementById(`lesson${lessonNum}-progress-text`);
            
            if (progressBar) {
                progressBar.style.width = `${(progress / 4) * 100}%`;
            }
            if (progressText) {
                progressText.textContent = `${progress}/4 dokonÄeno`;
            }
            
            // Update overall progress
            const totalProgress = Object.values(lessonProgress).reduce((a, b) => a + b, 0);
            const overallProgress = document.getElementById('overall-progress');
            const overallPercentage = document.getElementById('overall-percentage');
            const percentage = Math.min(100, (totalProgress / 20) * 100);
            
            if (overallProgress) {
                overallProgress.style.width = `${percentage}%`;
            }
            if (overallPercentage) {
                overallPercentage.textContent = `${Math.round(percentage)}%`;
            }
            
            // Show next lesson button when lesson is complete
            if (progress >= 4) {
                const nextButton = document.getElementById(`next-lesson-${lessonNum}`);
                if (nextButton) {
                    nextButton.classList.remove('hidden');
                }
                
                // Update lesson status in overview
                updateLessonOverviewStatus(lessonNum, 'completed');
                
                // Show lesson completion celebration
                showLessonCompletion(lessonNum);
                
                // Show finish button for lesson 5
                if (lessonNum === 5) {
                    const finishButton = document.getElementById('finish-course');
                    if (finishButton) {
                        finishButton.classList.remove('hidden');
                    }
                }
                
                // Streak tracking
                streak++;
                if (streak >= 2) {
                    showAchievement();
                }
            }
            
            // Random bonus card
            if (progress === 2 && !bonusShown && Math.random() < 0.35) {
                showBonusCard();
                bonusShown = true;
            }
        }

        function updateLessonOverviewStatus(lessonNum, status) {
            const statusElement = document.getElementById(`lesson${lessonNum}-overview-status`);
            if (statusElement) {
                switch(status) {
                    case 'started':
                        statusElement.textContent = 'ğŸ”„ ProbÃ­hÃ¡';
                        statusElement.className = 'text-xs mt-1 text-blue-600';
                        break;
                    case 'completed':
                        statusElement.textContent = 'âœ… DokonÄeno';
                        statusElement.className = 'text-xs mt-1 text-green-600';
                        break;
                    case 'skipped':
                        statusElement.textContent = 'â­ï¸ PÅ™eskoÄeno';
                        statusElement.className = 'text-xs mt-1 text-gray-500';
                        break;
                }
            }
        }

        function markActionComplete(lessonNum, actionId) {
            if (!completedActions[lessonNum].includes(actionId)) {
                completedActions[lessonNum].push(actionId);
                lessonProgress[lessonNum]++;
                updateLessonProgress(lessonNum);
                saveProgress();
                
                // Celebration animation
                const element = document.querySelector(`[data-action="${actionId}"]`) || document.activeElement;
                if (element) {
                    element.classList.add('celebration');
                    setTimeout(() => element.classList.remove('celebration'), 600);
                }
            }
        }

        function skipSection(lessonNum, sectionId) {
            markActionComplete(lessonNum, sectionId);
        }

        function skipLesson(lessonNum) {
            // Mark lesson as skipped but don't add to progress
            updateLessonOverviewStatus(lessonNum, 'skipped');
            
            // Show next lesson button without completing progress
            const nextButton = document.getElementById(`next-lesson-${lessonNum}`);
            if (nextButton) {
                nextButton.classList.remove('hidden');
            }
            
            // Show finish button for lesson 5
            if (lessonNum === 5) {
                const finishButton = document.getElementById('finish-course');
                if (finishButton) {
                    finishButton.classList.remove('hidden');
                }
            }
        }

        // Lesson 1 functions
        function calculateInterest() {
            const rate = parseFloat(document.getElementById('interest-rate').value);
            const inflation = parseFloat(document.getElementById('inflation-rate').value);
            const time = parseFloat(document.getElementById('time-period').value);
            
            const nominal = 10000 * Math.pow(1 + rate/100, time);
            const real = nominal / Math.pow(1 + inflation/100, time);
            
            document.getElementById('nominal-value').textContent = `${nominal.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('real-value').textContent = `${real.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('interest-result').classList.remove('hidden');
            
            markActionComplete(1, 'calculator');
        }

        function updateInflationSlider() {
            const inflation = parseFloat(document.getElementById('inflation-slider').value);
            const nominalRate = 5; // Fixed for demo
            const realRate = nominalRate - inflation;
            
            document.getElementById('current-inflation').textContent = `${inflation}%`;
            document.getElementById('real-rate').textContent = `${realRate.toFixed(1)}%`;
            
            markActionComplete(1, 'slider');
        }

        function flipCard(card, lessonNum) {
            card.classList.toggle('flipped');
            flippedCards[lessonNum]++;
            
            if (flippedCards[lessonNum] >= 2) {
                markActionComplete(lessonNum, 'flip-cards');
            }
        }

        function answerQuiz(lessonNum, answer, isCorrect) {
            const resultDiv = document.getElementById(`quiz-${lessonNum}-result`);
            const options = document.querySelectorAll(`#quiz-${lessonNum} .quiz-option`);
            
            options.forEach(option => {
                option.disabled = true;
                option.classList.add('opacity-50');
            });
            
            if (isCorrect) {
                let correctMessage = '';
                switch(lessonNum) {
                    case 1:
                        correctMessage = 'âœ… SprÃ¡vnÄ›! ReÃ¡lnÃ¡ sazba = 4% - 6% = -2%. VaÅ¡e penÃ­ze ztrÃ¡cejÃ­ kupnÃ­ sÃ­lu.';
                        break;
                    case 2:
                        correctMessage = 'âœ… SprÃ¡vnÄ›! KdyÅ¾ ÄŒNB zvÃ½Å¡Ã­ sazbu, banky si pÅ¯jÄujÃ­ drÃ¡Å¾, takÅ¾e i hypotÃ©ky zdraÅ¾ujÃ­.';
                        break;
                    case 3:
                        correctMessage = 'âœ… SprÃ¡vnÄ›! RPSN zahrnuje vÅ¡echny nÃ¡klady, takÅ¾e jen podle nÄ›j poznÃ¡te skuteÄnÄ› levnÄ›jÅ¡Ã­ pÅ¯jÄku.';
                        break;
                    case 4:
                        correctMessage = 'âœ… SprÃ¡vnÄ›! Pravidlo 72: 72 Ã· 8 = 9 let. SloÅ¾enÃ© ÃºroÄenÃ­ je rychlejÅ¡Ã­ neÅ¾ jednoduchÃ© poÄÃ­tÃ¡nÃ­!';
                        break;
                    case 5:
                        correctMessage = 'âœ… SprÃ¡vnÄ›! VÅ¾dy nejdÅ™Ã­ve splaÅ¥te vysokoÃºroÄenÃ© dluhy. GarantovanÃ¡ "Ãºspora" 15% je lepÅ¡Ã­ neÅ¾ nejistÃ½ vÃ½nos 7%.';
                        break;
                }
                resultDiv.innerHTML = `<p class="font-medium text-green-700">${correctMessage}</p>`;
                resultDiv.classList.remove('hidden');
                markActionComplete(lessonNum, 'quiz');
            } else {
                resultDiv.innerHTML = '<p class="font-medium text-red-700">âŒ Zkuste to znovu! PÅ™emÃ½Å¡lejte o vztahu mezi sazbami a nÃ¡klady.</p>';
                resultDiv.classList.remove('hidden');
                
                setTimeout(() => {
                    options.forEach(option => {
                        option.disabled = false;
                        option.classList.remove('opacity-50');
                    });
                    resultDiv.classList.add('hidden');
                }, 3000);
            }
        }

        function restartQuiz(lessonNum) {
            const resultDiv = document.getElementById(`quiz-${lessonNum}-result`);
            const options = document.querySelectorAll(`#quiz-${lessonNum} .quiz-option`);
            
            resultDiv.classList.add('hidden');
            options.forEach(option => {
                option.disabled = false;
                option.classList.remove('opacity-50');
            });
        }

        // Lesson 2 specific functions
        function calculateRisk() {
            const selectedType = document.querySelector('input[name="client-type"]:checked');
            if (!selectedType) return;
            
            const riskResult = document.getElementById('risk-result');
            const clientRate = document.getElementById('client-rate');
            const riskExplanation = document.getElementById('risk-explanation');
            
            let rate, explanation, color;
            
            switch(selectedType.value) {
                case 'safe':
                    rate = '4.2%';
                    explanation = 'NÃ­zkÃ© riziko = niÅ¾Å¡Ã­ sazba. Banka vÄ›Å™Ã­, Å¾e pÅ¯jÄku splatÃ­te.';
                    color = 'text-green-600';
                    break;
                case 'medium':
                    rate = '6.5%';
                    explanation = 'StÅ™ednÃ­ riziko = prÅ¯mÄ›rnÃ¡ sazba. Banka si ÃºÄtuje rezervu na moÅ¾nÃ© problÃ©my.';
                    color = 'text-yellow-600';
                    break;
                case 'risky':
                    rate = '12.8%';
                    explanation = 'VysokÃ© riziko = vysokÃ¡ sazba. Banka si chrÃ¡nÃ­ pÅ™ed moÅ¾nÃ½mi ztrÃ¡tami.';
                    color = 'text-red-600';
                    break;
            }
            
            clientRate.textContent = rate;
            clientRate.className = `text-3xl font-bold mb-2 ${color}`;
            riskExplanation.textContent = explanation;
            riskResult.classList.remove('hidden');
            
            markActionComplete(2, 'risk-calculator');
        }

        let bankStates = {
            bank1: { active: true, baseRate: 5.5 },
            bank2: { active: true, baseRate: 5.2 },
            bank3: { active: true, baseRate: 5.8 }
        };

        function toggleBank(bankId) {
            bankStates[bankId].active = !bankStates[bankId].active;
            updateBankDisplay();
            markActionComplete(2, 'competition-game');
        }

        function updateBankDisplay() {
            let totalRate = 0;
            let activeCount = 0;
            
            Object.keys(bankStates).forEach(bankId => {
                const bank = bankStates[bankId];
                const statusElement = document.getElementById(`${bankId}-status`);
                const rateElement = document.getElementById(`${bankId}-rate`);
                const cardElement = statusElement.closest('.bank-card');
                
                if (bank.active) {
                    statusElement.textContent = 'AktivnÃ­';
                    cardElement.classList.remove('opacity-50');
                    totalRate += bank.baseRate;
                    activeCount++;
                } else {
                    statusElement.textContent = 'NeaktivnÃ­';
                    cardElement.classList.add('opacity-50');
                }
            });
            
            // Update average rate
            const averageRate = activeCount > 0 ? (totalRate / activeCount).toFixed(1) : 0;
            const averageElement = document.getElementById('average-rate');
            
            if (activeCount === 1) {
                averageElement.textContent = `${averageRate}% (monopol - vysokÃ© sazby!)`;
            } else if (activeCount === 3) {
                averageElement.textContent = `${averageRate}% (konkurence - lepÅ¡Ã­ sazby!)`;
            } else {
                averageElement.textContent = `${averageRate}%`;
            }
        }

        // Lesson 3 specific functions
        function calculateRPSN() {
            const amount = parseFloat(document.getElementById('loan-amount').value);
            const rate = parseFloat(document.getElementById('loan-rate').value);
            const years = parseFloat(document.getElementById('loan-years').value);
            const setupFee = parseFloat(document.getElementById('setup-fee').value);
            const monthlyFee = parseFloat(document.getElementById('monthly-fee').value);
            
            // Validation
            if (years <= 0) {
                alert('âš ï¸ Doba splatnosti musÃ­ bÃ½t vÄ›tÅ¡Ã­ neÅ¾ 0 let!');
                return;
            }
            
            if (setupFee + (monthlyFee * years * 12) >= amount) {
                alert('âš ï¸ Pozor! Poplatky jsou vyÅ¡Å¡Ã­ neÅ¾ jistina pÅ¯jÄky. Zkontrolujte zadanÃ© hodnoty.');
                return;
            }
            
            const months = years * 12;
            const monthlyRate = rate / 100 / 12;
            
            // Calculate monthly payment (principal + interest)
            const monthlyPayment = amount * (monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
            
            // Total cost including fees
            const totalInterest = (monthlyPayment * months) - amount;
            const totalFees = setupFee + (monthlyFee * months);
            const totalCost = amount + totalInterest + totalFees;
            
            // Approximate RPSN calculation
            const rpsn = ((totalCost / amount - 1) / years) * 100;
            
            document.getElementById('display-rate').textContent = `${rate}%`;
            document.getElementById('calculated-rpsn').textContent = `${rpsn.toFixed(1)}%`;
            document.getElementById('total-cost').textContent = `${totalCost.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('monthly-payment').textContent = `${(monthlyPayment + monthlyFee).toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('rpsn-result').classList.remove('hidden');
            
            markActionComplete(3, 'rpsn-calculator');
        }

        function selectLoan(loanId) {
            // Simulate RPSN calculation for comparison
            const loans = {
                loan1: { rate: 4.5, fee: 5000, rpsn: 5.8 },
                loan2: { rate: 6.0, fee: 0, rpsn: 6.0 },
                loan3: { rate: 5.2, fee: 1500, rpsn: 5.5 }
            };
            
            // Update all loan displays
            Object.keys(loans).forEach(id => {
                document.getElementById(`${id}-rpsn`).textContent = `RPSN: ${loans[id].rpsn}%`;
            });
            
            // Find best loan
            const bestLoan = Object.keys(loans).reduce((a, b) => loans[a].rpsn < loans[b].rpsn ? a : b);
            const bestLoanName = bestLoan === 'loan1' ? 'Banka A' : bestLoan === 'loan2' ? 'Banka B' : 'Banka C';
            
            document.getElementById('best-loan').textContent = `NejlevnÄ›jÅ¡Ã­ je ${bestLoanName} s RPSN ${loans[bestLoan].rpsn}%`;
            document.getElementById('comparison-result').classList.remove('hidden');
            
            markActionComplete(3, 'loan-comparison');
        }

        // Lesson 4 specific functions
        function runCompoundSimulation() {
            const initial = parseFloat(document.getElementById('initial-amount').value);
            const monthly = parseFloat(document.getElementById('monthly-deposit').value);
            const rate = parseFloat(document.getElementById('compound-rate').value) / 100;
            const years = parseFloat(document.getElementById('years-slider').value);
            
            const months = years * 12;
            const monthlyRate = rate / 12;
            
            let balance = initial;
            let totalInvested = initial;
            
            for (let i = 0; i < months; i++) {
                balance = balance * (1 + monthlyRate) + monthly;
                totalInvested += monthly;
            }
            
            const totalInterest = balance - totalInvested;
            
            document.getElementById('result-years').textContent = years;
            document.getElementById('total-invested').textContent = `${totalInvested.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('total-interest').textContent = `${totalInterest.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('final-amount').textContent = `${balance.toLocaleString('cs-CZ')} KÄ`;
            
            // Generate insight
            const interestRatio = totalInterest / totalInvested;
            let insight = '';
            if (interestRatio > 1) {
                insight = 'Ãšroky pÅ™evyÅ¡ujÃ­ vaÅ¡e vklady! To je sÃ­la sloÅ¾enÃ©ho ÃºroÄenÃ­.';
            } else if (interestRatio > 0.5) {
                insight = 'Ãšroky tvoÅ™Ã­ vÃ­ce neÅ¾ polovinu vÃ½sledku. ÄŒas je vÃ¡Å¡ pÅ™Ã­tel!';
            } else {
                insight = 'Zkuste delÅ¡Ã­ obdobÃ­ nebo vyÅ¡Å¡Ã­ sazbu pro vÄ›tÅ¡Ã­ efekt sloÅ¾enÃ©ho ÃºroÄenÃ­.';
            }
            
            document.getElementById('compound-insight').textContent = insight;
            document.getElementById('compound-result').classList.remove('hidden');
            
            markActionComplete(4, 'compound-simulator');
        }

        function calculateRule72(rate) {
            const years = Math.round(72 / rate);
            const explanation = `PÅ™i ${rate}% Ãºroku se vaÅ¡e penÃ­ze zdvojnÃ¡sobÃ­ za ${years} let. Pravidlo 72 funguje!`;
            
            document.getElementById('rule72-explanation').classList.remove('hidden');
            document.getElementById('rule72-text').textContent = explanation;
            
            markActionComplete(4, 'rule-72');
        }

        // Lesson 5 specific functions
        function calculateDebtVsInvestment() {
            const debtRate = parseFloat(document.getElementById('debt-rate').value);
            const investmentReturn = parseFloat(document.getElementById('investment-return').value);
            const availableMoney = parseFloat(document.getElementById('available-money').value);
            
            const debtSavings = availableMoney * (debtRate / 100);
            const investmentGain = availableMoney * (investmentReturn / 100);
            
            let recommendation, explanation, color;
            
            if (debtRate > investmentReturn) {
                recommendation = 'ğŸ’¡ SplaÅ¥te dluh!';
                explanation = `Ãšrok na dluhu (${debtRate}%) je vyÅ¡Å¡Ã­ neÅ¾ oÄekÃ¡vanÃ½ vÃ½nos (${investmentReturn}%). SplÃ¡cenÃ­ dluhu je garantovanÃ¡ "investice".`;
                color = 'text-red-600';
            } else {
                recommendation = 'ğŸ“ˆ Investujte!';
                explanation = `OÄekÃ¡vanÃ½ vÃ½nos (${investmentReturn}%) je vyÅ¡Å¡Ã­ neÅ¾ Ãºrok na dluhu (${debtRate}%). Ale pozor na riziko!`;
                color = 'text-green-600';
            }
            
            document.getElementById('recommendation').textContent = recommendation;
            document.getElementById('recommendation').className = `text-lg font-bold mb-3 ${color}`;
            document.getElementById('recommendation-explanation').textContent = explanation;
            document.getElementById('debt-savings').textContent = `${debtSavings.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('investment-gain').textContent = `${investmentGain.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('debt-investment-result').classList.remove('hidden');
            
            markActionComplete(5, 'debt-investment');
        }

        function updateGoalAmount() {
            const goal = document.getElementById('savings-goal').value;
            const amounts = {
                car: 500000,
                house: 2000000,
                vacation: 50000,
                custom: document.getElementById('goal-amount').value
            };
            
            if (goal !== 'custom') {
                document.getElementById('goal-amount').value = amounts[goal];
            }
        }

        function calculateSavingsGoal() {
            const goalAmount = parseFloat(document.getElementById('goal-amount').value);
            const years = parseFloat(document.getElementById('goal-years').value);
            const returnRate = parseFloat(document.getElementById('goal-return').value) / 100;
            
            const months = years * 12;
            const monthlyRate = returnRate / 12;
            
            // Calculate required monthly payment for future value
            let monthlyPayment;
            if (monthlyRate === 0) {
                monthlyPayment = goalAmount / months;
            } else {
                monthlyPayment = goalAmount * monthlyRate / (Math.pow(1 + monthlyRate, months) - 1);
            }
            
            const goalName = document.getElementById('savings-goal').selectedOptions[0].text;
            
            document.getElementById('display-goal').textContent = `${goalAmount.toLocaleString('cs-CZ')} KÄ`;
            document.getElementById('display-years').textContent = `${years} let`;
            document.getElementById('monthly-savings').textContent = `${monthlyPayment.toLocaleString('cs-CZ')} KÄ`;
            
            // Generate tip
            let tip = '';
            if (monthlyPayment > 10000) {
                tip = 'VysokÃ¡ mÄ›sÃ­ÄnÃ­ ÄÃ¡stka. ZvaÅ¾te delÅ¡Ã­ obdobÃ­ nebo vyÅ¡Å¡Ã­ vÃ½nos.';
            } else if (monthlyPayment < 1000) {
                tip = 'SkvÄ›lÃ©! Tato ÄÃ¡stka je snadno dosaÅ¾itelnÃ¡.';
            } else {
                tip = 'RozumnÃ¡ mÄ›sÃ­ÄnÃ­ ÄÃ¡stka. ZaÄnÄ›te co nejdÅ™Ã­ve!';
            }
            
            document.getElementById('savings-tip').textContent = tip;
            document.getElementById('savings-goal-result').classList.remove('hidden');
            
            markActionComplete(5, 'savings-planner');
        }

        function finishCourse() {
            document.getElementById('course-completion').classList.remove('hidden');
            
            // Update all lesson statuses to completed
            for (let i = 1; i <= 5; i++) {
                updateLessonOverviewStatus(i, 'completed');
            }
            
            // Show final achievement
            showAchievement();
        }

        function showBonusCard() {
            const bonusCards = [
                "ğŸ’¡ VÄ›dÄ›li jste, Å¾e Albert Einstein nazval sloÅ¾enÃ© ÃºroÄenÃ­ \"osmÃ½m divem svÄ›ta\"?",
                "ğŸ¯ Pravidlo 72: VydÄ›lte 72 Ãºrokovou sazbou a zÃ­skÃ¡te roky potÅ™ebnÃ© k zdvojnÃ¡sobenÃ­ penÄ›z!",
                "ğŸ“ˆ ReÃ¡lnÃ¡ sazba v ÄŒR byla v roce 2022 zÃ¡pornÃ¡ kvÅ¯li vysokÃ© inflaci.",
                "ğŸ’° 1% rozdÃ­l v Ãºroku za 30 let = desÃ­tky tisÃ­c korun rozdÃ­lu!",
                "ğŸ¦ RPSN musÃ­ bÃ½t podle zÃ¡kona uvedena u vÅ¡ech pÅ¯jÄek vÄ›tÅ¡Ã­ch neÅ¾ 20 000 KÄ."
            ];
            
            const randomTip = bonusCards[Math.floor(Math.random() * bonusCards.length)];
            document.getElementById('bonus-content').textContent = randomTip;
            document.getElementById('bonus-card').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('bonus-card').classList.add('hidden');
            }, 8000);
        }

        function closeBonusCard() {
            document.getElementById('bonus-card').classList.add('hidden');
        }

        function showAchievement() {
            const badge = document.getElementById('achievement-badge');
            badge.classList.remove('hidden');
            badge.classList.add('celebration');
            
            setTimeout(() => {
                badge.classList.add('hidden');
                badge.classList.remove('celebration');
            }, 3000);
        }

        function showLessonCompletion(lessonNum) {
            // Create confetti
            createConfetti();
            
            // Show lesson badge
            const badges = {
                1: "ğŸ¯ Ãšrok Master",
                2: "ğŸ¦ Sazby Expert", 
                3: "ğŸ’³ RPSN Guru",
                4: "ğŸ“ˆ SloÅ¾enÃ© Kouzlo",
                5: "ğŸ† FinanÄnÃ­ StratÃ©g"
            };
            
            showLessonBadge(badges[lessonNum]);
        }

        function createConfetti() {
            const colors = ['#f39c12', '#e74c3c', '#9b59b6', '#3498db', '#2ecc71'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        function showLessonBadge(badgeText) {
            const badge = document.createElement('div');
            badge.className = 'lesson-badge fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-yellow-400 text-black px-6 py-4 rounded-full shadow-lg z-50 text-lg font-bold';
            badge.textContent = badgeText;
            document.body.appendChild(badge);
            
            setTimeout(() => {
                badge.remove();
            }, 3000);
        }

        function updateCNBRate() {
            const cnbRate = parseFloat(document.getElementById('cnb-rate').value);
            const variableRate = 2.5 + cnbRate; // Base margin + CNB rate
            const payment = 20000 + (cnbRate * 1000); // Simplified payment calculation
            
            document.getElementById('cnb-rate-display').textContent = `${cnbRate.toFixed(1)}%`;
            document.getElementById('variable-rate').textContent = `${variableRate.toFixed(1)}%`;
            document.getElementById('variable-payment').textContent = `SplÃ¡tka: ${payment.toLocaleString('cs-CZ')} KÄ`;
            
            markActionComplete(2, 'rate-types');
        }

        function showStickyCTA() {
            const totalProgress = Object.values(lessonProgress).reduce((a, b) => a + b, 0);
            const stickyCTA = document.getElementById('sticky-cta');
            
            if (totalProgress === 0 && currentLesson === 0) {
                stickyCTA.classList.remove('hidden');
            } else {
                stickyCTA.classList.add('hidden');
            }
        }

        // Event listeners
        document.getElementById('inflation-slider').addEventListener('input', updateInflationSlider);
        document.getElementById('years-slider').addEventListener('input', function() {
            document.getElementById('years-display').textContent = this.value;
        });
        
        // CNB rate slider
        if (document.getElementById('cnb-rate')) {
            document.getElementById('cnb-rate').addEventListener('input', updateCNBRate);
        }
        
        // Progress saving functions
        function saveProgress() {
            const progressData = {
                lessonProgress: lessonProgress,
                completedActions: completedActions,
                currentLesson: currentLesson
            };
            localStorage.setItem('urokovy-kurz-progress', JSON.stringify(progressData));
        }

        function loadProgress() {
            const saved = localStorage.getItem('urokovy-kurz-progress');
            if (saved) {
                const data = JSON.parse(saved);
                lessonProgress = data.lessonProgress || {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
                completedActions = data.completedActions || {1: [], 2: [], 3: [], 4: [], 5: []};
                
                // Update all progress displays
                for (let i = 1; i <= 5; i++) {
                    updateLessonProgress(i);
                    if (lessonProgress[i] >= 4) {
                        updateLessonOverviewStatus(i, 'completed');
                    } else if (lessonProgress[i] > 0) {
                        updateLessonOverviewStatus(i, 'started');
                    }
                }
            }
        }

        // Central Bank Game Variables
        let gameState = {
            cnbRate: 2.0,
            inflation: 3.5,
            growth: 2.1,
            unemployment: 4.2,
            quarter: 1,
            score: 85,
            events: []
        };

        let gameEvents = [
            {
                trigger: 'high_inflation',
                emoji: 'ğŸ”¥',
                text: 'Inflace pÅ™ekroÄila 4%! ObÄanÃ© protestujÃ­ proti drahÃ½m cenÃ¡m.',
                effect: { inflation: 0.5, growth: -0.2 }
            },
            {
                trigger: 'recession_risk',
                emoji: 'ğŸ“‰',
                text: 'Ekonomika zpomaluje! Firmy propouÅ¡tÄ›jÃ­ zamÄ›stnance.',
                effect: { growth: -0.8, unemployment: 0.5 }
            },
            {
                trigger: 'oil_shock',
                emoji: 'â›½',
                text: 'Ceny ropy prudce vzrostly! Inflace se zrychluje.',
                effect: { inflation: 1.2, growth: -0.3 }
            },
            {
                trigger: 'tech_boom',
                emoji: 'ğŸ’»',
                text: 'TechnologickÃ½ boom! Ekonomika roste rychleji.',
                effect: { growth: 0.8, unemployment: -0.3 }
            },
            {
                trigger: 'currency_crisis',
                emoji: 'ğŸ’±',
                text: 'Koruna oslabuje! Dovoz se zdraÅ¾uje.',
                effect: { inflation: 0.8, growth: -0.2 }
            }
        ];

        function startCentralBankGame() {
            document.getElementById('course-completion').classList.add('hidden');
            document.getElementById('central-bank-game').classList.remove('hidden');
            resetGame();
        }

        function resetGame() {
            gameState = {
                cnbRate: 2.0,
                inflation: 3.5,
                growth: 2.1,
                unemployment: 4.2,
                quarter: 1,
                score: 85,
                events: []
            };
            updateGameDisplay();
        }

        function changeCNBRate(change) {
            const newRate = Math.max(0, Math.min(15, gameState.cnbRate + change));
            const actualChange = newRate - gameState.cnbRate;
            gameState.cnbRate = newRate;
            
            // Show rate change animation
            showRateChangeIndicator(actualChange);
            
            // Create economic particles
            createEconomicParticles(actualChange > 0 ? 'up' : 'down');
            
            // Update economy based on rate change
            updateEconomyFromRateChange(actualChange);
            
            // Update display with animations
            updateGameDisplay();
            
            // Animate the CNB rate display
            const rateDisplay = document.getElementById('current-cnb-rate');
            rateDisplay.classList.add('pulse-animation');
            setTimeout(() => rateDisplay.classList.remove('pulse-animation'), 2000);
        }

        function updateEconomyFromRateChange(change) {
            // Higher rates -> lower inflation, lower growth, higher unemployment
            // Lower rates -> higher inflation, higher growth, lower unemployment
            
            const inflationChange = -change * 0.3 + (Math.random() - 0.5) * 0.2;
            const growthChange = -change * 0.4 + (Math.random() - 0.5) * 0.3;
            const unemploymentChange = change * 0.2 + (Math.random() - 0.5) * 0.1;
            
            gameState.inflation = Math.max(0, gameState.inflation + inflationChange);
            gameState.growth = Math.max(-2, Math.min(8, gameState.growth + growthChange));
            gameState.unemployment = Math.max(1, Math.min(15, gameState.unemployment + unemploymentChange));
            
            // Calculate score based on how close to targets
            calculateScore();
        }

        function calculateScore() {
            let score = 100;
            
            // Inflation target: 2% (Â±0.5% is perfect)
            const inflationDiff = Math.abs(gameState.inflation - 2);
            if (inflationDiff > 0.5) {
                score -= (inflationDiff - 0.5) * 15;
            }
            
            // Growth target: 2-3% is good
            if (gameState.growth < 1) {
                score -= (1 - gameState.growth) * 10;
            } else if (gameState.growth > 4) {
                score -= (gameState.growth - 4) * 8;
            }
            
            // Unemployment target: under 5% is good
            if (gameState.unemployment > 5) {
                score -= (gameState.unemployment - 5) * 12;
            }
            
            gameState.score = Math.max(0, Math.min(100, score));
        }

        function updateGameDisplay() {
            // Update main indicators
            document.getElementById('current-cnb-rate').textContent = `${gameState.cnbRate.toFixed(1)}%`;
            document.getElementById('game-inflation').textContent = `${gameState.inflation.toFixed(1)}%`;
            document.getElementById('game-growth').textContent = `${gameState.growth.toFixed(1)}%`;
            document.getElementById('game-unemployment').textContent = `${gameState.unemployment.toFixed(1)}%`;
            
            // Update detailed displays
            updateInflationCard();
            updateGrowthCard();
            updateUnemploymentCard();
            updateMarketReactions();
            updateScoreDisplay();
        }

        function updateInflationCard() {
            const card = document.getElementById('inflation-card');
            const emoji = document.getElementById('inflation-emoji');
            const display = document.getElementById('inflation-display');
            const bar = document.getElementById('inflation-bar');
            const status = document.getElementById('inflation-status');
            
            display.textContent = `${gameState.inflation.toFixed(1)}%`;
            bar.style.width = `${Math.min(100, (gameState.inflation / 5) * 100)}%`;
            
            if (gameState.inflation < 1.5) {
                emoji.textContent = 'â„ï¸';
                status.textContent = 'Deflace!';
                card.style.borderColor = '#3b82f6';
                bar.className = 'bg-blue-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-blue-600';
                card.classList.add('shake-animation');
            } else if (gameState.inflation <= 2.5) {
                emoji.textContent = 'âœ…';
                status.textContent = 'V cÃ­li';
                card.style.borderColor = '#10b981';
                bar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-green-600';
                card.classList.add('glow-animation');
            } else if (gameState.inflation <= 4) {
                emoji.textContent = 'ğŸ”¥';
                status.textContent = 'Nad cÃ­lem';
                card.style.borderColor = '#f59e0b';
                bar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-yellow-600';
            } else {
                emoji.textContent = 'ğŸš¨';
                status.textContent = 'Krize!';
                card.style.borderColor = '#ef4444';
                bar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-red-600';
                card.classList.add('shake-animation');
            }
            
            setTimeout(() => {
                card.classList.remove('shake-animation', 'glow-animation');
            }, 1500);
        }

        function updateGrowthCard() {
            const card = document.getElementById('growth-card');
            const emoji = document.getElementById('growth-emoji');
            const display = document.getElementById('growth-display');
            const bar = document.getElementById('growth-bar');
            const status = document.getElementById('growth-status');
            
            display.textContent = `${gameState.growth.toFixed(1)}%`;
            bar.style.width = `${Math.max(0, Math.min(100, ((gameState.growth + 2) / 6) * 100))}%`;
            
            if (gameState.growth < 0) {
                emoji.textContent = 'ğŸ“‰';
                status.textContent = 'Recese';
                card.style.borderColor = '#ef4444';
                bar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-red-600';
                card.classList.add('shake-animation');
            } else if (gameState.growth <= 1) {
                emoji.textContent = 'ğŸŒ';
                status.textContent = 'PomalÃ½ rÅ¯st';
                card.style.borderColor = '#f59e0b';
                bar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-yellow-600';
            } else if (gameState.growth <= 3) {
                emoji.textContent = 'ğŸ“ˆ';
                status.textContent = 'ZdravÃ½ rÅ¯st';
                card.style.borderColor = '#10b981';
                bar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-green-600';
                card.classList.add('glow-animation');
            } else {
                emoji.textContent = 'ğŸš€';
                status.textContent = 'PÅ™ehÅ™Ã¡tÃ­';
                card.style.borderColor = '#8b5cf6';
                bar.className = 'bg-purple-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-purple-600';
            }
            
            setTimeout(() => {
                card.classList.remove('shake-animation', 'glow-animation');
            }, 1500);
        }

        function updateUnemploymentCard() {
            const card = document.getElementById('unemployment-card');
            const emoji = document.getElementById('unemployment-emoji');
            const display = document.getElementById('unemployment-display');
            const bar = document.getElementById('unemployment-bar');
            const status = document.getElementById('unemployment-status');
            
            display.textContent = `${gameState.unemployment.toFixed(1)}%`;
            bar.style.width = `${Math.min(100, (gameState.unemployment / 10) * 100)}%`;
            
            if (gameState.unemployment <= 3) {
                emoji.textContent = 'ğŸ’ª';
                status.textContent = 'VÃ½bornÃ¡';
                card.style.borderColor = '#10b981';
                bar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-green-600';
                card.classList.add('glow-animation');
            } else if (gameState.unemployment <= 5) {
                emoji.textContent = 'ğŸ‘¥';
                status.textContent = 'PÅ™ijatelnÃ¡';
                card.style.borderColor = '#f59e0b';
                bar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-yellow-600';
            } else if (gameState.unemployment <= 8) {
                emoji.textContent = 'ğŸ˜Ÿ';
                status.textContent = 'VysokÃ¡';
                card.style.borderColor = '#f97316';
                bar.className = 'bg-orange-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-orange-600';
            } else {
                emoji.textContent = 'ğŸš¨';
                status.textContent = 'Krize!';
                card.style.borderColor = '#ef4444';
                bar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-red-600';
                card.classList.add('shake-animation');
            }
            
            setTimeout(() => {
                card.classList.remove('shake-animation', 'glow-animation');
            }, 1500);
        }

        function updateMarketReactions() {
            // Mortgage rates = CNB rate + margin
            const mortgageRate = gameState.cnbRate + 2.5;
            document.getElementById('mortgage-rate').textContent = `${mortgageRate.toFixed(1)}%`;
            
            // Savings rates = CNB rate - margin
            const savingsRate = Math.max(0.1, gameState.cnbRate - 0.5);
            document.getElementById('savings-rate').textContent = `${savingsRate.toFixed(1)}%`;
            
            // Business loans = CNB rate + higher margin
            const businessRate = gameState.cnbRate + 4.2;
            document.getElementById('business-loans').textContent = `${businessRate.toFixed(1)}%`;
            
            // Currency strength (simplified)
            const currencyChange = (gameState.cnbRate - 2) * 0.3;
            document.getElementById('currency-strength').textContent = `${currencyChange >= 0 ? '+' : ''}${currencyChange.toFixed(1)}%`;
            
            // Update trends
            const rateChange = gameState.cnbRate > 2 ? 'up' : 'down';
            document.getElementById('housing-trend').textContent = rateChange === 'up' ? 'ğŸ“ˆ Rostou' : 'ğŸ“‰ KlesajÃ­';
            document.getElementById('savings-trend').textContent = rateChange === 'up' ? 'ğŸ“ˆ Rostou' : 'ğŸ“‰ KlesajÃ­';
            document.getElementById('business-trend').textContent = rateChange === 'up' ? 'ğŸ“ˆ DraÅ¾Å¡Ã­' : 'ğŸ“‰ LevnÄ›jÅ¡Ã­';
            document.getElementById('currency-trend').textContent = currencyChange > 0 ? 'ğŸ’ª SilnÄ›jÅ¡Ã­' : 'ğŸ“‰ SlabÅ¡Ã­';
            
            // Animate market cards
            const markets = ['housing-market', 'savings-market', 'business-market', 'currency-market'];
            markets.forEach((market, index) => {
                setTimeout(() => {
                    document.getElementById(market).classList.add('pulse-animation');
                    setTimeout(() => {
                        document.getElementById(market).classList.remove('pulse-animation');
                    }, 1000);
                }, index * 200);
            });
        }

        function updateScoreDisplay() {
            document.getElementById('game-score').textContent = Math.round(gameState.score);
            document.getElementById('game-quarters').textContent = gameState.quarter;
            document.getElementById('score-bar').style.width = `${gameState.score}%`;
            
            let feedback = '';
            if (gameState.score >= 90) {
                feedback = 'ğŸ† VÃ½bornÃ¡ prÃ¡ce! Jste ekonomickÃ½ gÃ©nius!';
            } else if (gameState.score >= 75) {
                feedback = 'ğŸ‘ DobrÃ¡ prÃ¡ce! Ekonomika je stabilnÃ­.';
            } else if (gameState.score >= 60) {
                feedback = 'âš ï¸ PrÅ¯mÄ›rnÃ©. Zkuste lÃ©pe vyvÃ¡Å¾it cÃ­le.';
            } else if (gameState.score >= 40) {
                feedback = 'ğŸ˜° ProblÃ©my! Ekonomika je nestabilnÃ­.';
            } else {
                feedback = 'ğŸš¨ Krize! OkamÅ¾itÄ› jednejte!';
            }
            
            document.getElementById('performance-feedback').textContent = feedback;
        }

        function nextQuarter() {
            gameState.quarter++;
            
            // Random economic events
            if (Math.random() < 0.4) {
                triggerRandomEvent();
            }
            
            // Natural economic fluctuations
            gameState.inflation += (Math.random() - 0.5) * 0.3;
            gameState.growth += (Math.random() - 0.5) * 0.4;
            gameState.unemployment += (Math.random() - 0.5) * 0.2;
            
            // Bounds checking
            gameState.inflation = Math.max(0, gameState.inflation);
            gameState.growth = Math.max(-2, Math.min(8, gameState.growth));
            gameState.unemployment = Math.max(1, Math.min(15, gameState.unemployment));
            
            calculateScore();
            updateGameDisplay();
            
            // Animate quarter transition
            const quarterDisplay = document.getElementById('game-quarters');
            quarterDisplay.classList.add('celebration');
            setTimeout(() => quarterDisplay.classList.remove('celebration'), 600);
        }

        function triggerRandomEvent() {
            const availableEvents = gameEvents.filter(event => {
                if (event.trigger === 'high_inflation' && gameState.inflation < 4) return true;
                if (event.trigger === 'recession_risk' && gameState.growth < 1) return true;
                return Math.random() < 0.3;
            });
            
            if (availableEvents.length === 0) return;
            
            const event = availableEvents[Math.floor(Math.random() * availableEvents.length)];
            
            // Apply event effects
            if (event.effect.inflation) gameState.inflation += event.effect.inflation;
            if (event.effect.growth) gameState.growth += event.effect.growth;
            if (event.effect.unemployment) gameState.unemployment += event.effect.unemployment;
            
            // Show event
            showGameEvent(event);
        }

        function showGameEvent(event) {
            document.getElementById('event-emoji').textContent = event.emoji;
            document.getElementById('event-text').textContent = event.text;
            document.getElementById('game-events').classList.remove('hidden');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                document.getElementById('game-events').classList.add('hidden');
            }, 5000);
        }

        function showRateChangeIndicator(change) {
            const indicator = document.createElement('div');
            indicator.className = 'rate-change-indicator';
            indicator.textContent = change > 0 ? `+${change.toFixed(1)}%` : `${change.toFixed(1)}%`;
            indicator.style.color = change > 0 ? '#10b981' : '#ef4444';
            
            const container = document.getElementById('current-cnb-rate').parentElement;
            container.style.position = 'relative';
            container.appendChild(indicator);
            
            setTimeout(() => {
                indicator.remove();
            }, 2000);
        }

        function createEconomicParticles(direction) {
            const container = document.getElementById('central-bank-game');
            const colors = direction === 'up' ? ['#10b981', '#059669'] : ['#ef4444', '#dc2626'];
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'economic-particle';
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.left = Math.random() * container.offsetWidth + 'px';
                    particle.style.top = container.offsetHeight * 0.3 + 'px';
                    
                    container.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // Initialize
        loadProgress();
        updateInflationSlider();
        updateBankDisplay();
        showStickyCTA();
        
        // Update sticky CTA on scroll
        window.addEventListener('scroll', showStickyCTA);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9863ce35d5123009',t:'MTc1OTA2ODQyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
