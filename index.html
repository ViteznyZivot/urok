<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√öroky bez ≈Ωargonu - Bleskov√Ω Minikurz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .flip-card {
            perspective: 1000px;
            height: 120px;
        }
        
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        
        .flip-card-back {
            transform: rotateY(180deg);
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .celebration {
            animation: bounce 0.6s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            80% { transform: translateY(-5px); }
        }
        
        .drag-item {
            cursor: grab;
            transition: all 0.3s ease;
        }
        
        .drag-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }
        
        .drop-zone {
            min-height: 60px;
            transition: all 0.3s ease;
        }
        
        .drop-zone.drag-over {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }
        
        .slider-container {
            position: relative;
        }
        
        .slider-track {
            height: 8px;
            background: linear-gradient(to right, #ef4444, #f59e0b, #10b981);
            border-radius: 4px;
        }
        
        .bonus-card {
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .compound-animation {
            animation: grow 2s ease-in-out infinite;
        }
        
        @keyframes grow {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .pulse-animation {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
        
        .shake-animation {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .glow-animation {
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            to { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .economic-particle {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 3s ease-out forwards;
        }
        
        @keyframes particle-float {
            0% { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }
        
        .rate-change-indicator {
            position: absolute;
            top: -20px;
            right: 10px;
            font-weight: bold;
            font-size: 18px;
            animation: indicator-fade 2s ease-out forwards;
        }
        
        @keyframes indicator-fade {
            0% { 
                transform: translateY(0);
                opacity: 1;
            }
            100% { 
                transform: translateY(-30px);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">üí∞ √öroky bez ≈Ωargonu</h1>
                    <p class="text-sm text-gray-600">Bleskov√Ω minikurz pro zaƒç√°teƒçn√≠ky</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-600">Pokrok</div>
                    <div class="w-24 bg-gray-200 rounded-full h-2">
                        <div id="overall-progress" class="progress-bar bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="overall-percentage">0%</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-6">
        <!-- Course Overview -->
        <div id="overview" class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">üöÄ</div>
                <h2 class="text-3xl font-bold text-gray-900 mb-4">V√≠tejte v kurzu!</h2>
                <p class="text-lg text-gray-700 mb-6">Za 30‚Äì45 minut z√≠sk√°te praktick√© n√°stroje pro rozhodov√°n√≠ o √∫roc√≠ch, spo≈ôen√≠ a dluz√≠ch. Bez ≈æargonu, s kalkulaƒçkami a interaktivn√≠mi prvky!</p>
                
                <div class="grid md:grid-cols-5 gap-4 mb-6">
                    <div class="lesson-overview bg-blue-50 rounded-lg p-4 text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="startLesson(1)">
                        <div class="text-2xl mb-2">‚ö°</div>
                        <div class="font-semibold text-sm">Lekce 1</div>
                        <div class="text-xs text-gray-600">√örok v 60 vte≈ôin√°ch</div>
                        <div class="text-xs mt-1" id="lesson1-overview-status">üîí Nezaƒçato</div>
                    </div>
                    <div class="lesson-overview bg-green-50 rounded-lg p-4 text-center cursor-pointer hover:bg-green-100 transition-colors" onclick="startLesson(2)">
                        <div class="text-2xl mb-2">üè¶</div>
                        <div class="font-semibold text-sm">Lekce 2</div>
                        <div class="text-xs text-gray-600">Jak sazby vznikaj√≠</div>
                        <div class="text-xs mt-1" id="lesson2-overview-status">üîí Nezaƒçato</div>
                    </div>
                    <div class="lesson-overview bg-yellow-50 rounded-lg p-4 text-center cursor-pointer hover:bg-yellow-100 transition-colors" onclick="startLesson(3)">
                        <div class="text-2xl mb-2">üí≥</div>
                        <div class="font-semibold text-sm">Lekce 3</div>
                        <div class="text-xs text-gray-600">RPSN bez lupy</div>
                        <div class="text-xs mt-1" id="lesson3-overview-status">üîí Nezaƒçato</div>
                    </div>
                    <div class="lesson-overview bg-purple-50 rounded-lg p-4 text-center cursor-pointer hover:bg-purple-100 transition-colors" onclick="startLesson(4)">
                        <div class="text-2xl mb-2">üìà</div>
                        <div class="font-semibold text-sm">Lekce 4</div>
                        <div class="text-xs text-gray-600">Slo≈æen√© kouzlo</div>
                        <div class="text-xs mt-1" id="lesson4-overview-status">üîí Nezaƒçato</div>
                    </div>
                    <div class="lesson-overview bg-red-50 rounded-lg p-4 text-center cursor-pointer hover:bg-red-100 transition-colors" onclick="startLesson(5)">
                        <div class="text-2xl mb-2">üéØ</div>
                        <div class="font-semibold text-sm">Lekce 5</div>
                        <div class="text-xs text-gray-600">Strategie v praxi</div>
                        <div class="text-xs mt-1" id="lesson5-overview-status">üîí Nezaƒçato</div>
                    </div>
                </div>
                
                <!-- What You'll Gain -->
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-blue-50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">üéØ</div>
                        <h4 class="font-semibold text-blue-800 mb-1">Rozum√≠m sazb√°m</h4>
                        <p class="text-sm text-blue-700">Nomin√°ln√≠ vs. re√°ln√© √∫roky, inflace</p>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">üí≥</div>
                        <h4 class="font-semibold text-green-800 mb-1">ƒåtu RPSN</h4>
                        <p class="text-sm text-green-700">Skuteƒçn√° cena p≈Øjƒçek a √∫vƒõr≈Ø</p>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">‚öñÔ∏è</div>
                        <h4 class="font-semibold text-purple-800 mb-1">Um√≠m rozhodnout</h4>
                        <p class="text-sm text-purple-700">Spl√°cet vs. investovat, strategie</p>
                    </div>
                </div>
                
                <button onclick="startLesson(1)" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105">
                    Zaƒç√≠t kurz! üöÄ
                </button>
            </div>
        </div>

        <!-- Lesson 1 -->
        <div id="lesson-1" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">‚ö° Lekce 1: √örok v 60 vte≈ôin√°ch</h2>
                    <p class="text-gray-600">√örok = cena penƒõz v ƒçase. Rozli≈°√≠m nomin√°ln√≠ √ó re√°lnou sazbu.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson1-progress" class="progress-bar bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson1-progress-text">0/4 dokonƒçeno</div>
                </div>
            </div>

            <!-- What is Interest Explanation -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 mb-6 border-l-4 border-blue-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ü§î</span>
                    Co je to vlastnƒõ √∫rok?
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">üí∞</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">Jednodu≈°e ≈ôeƒçeno:</h4>
                                <p class="text-gray-700">√örok je <strong>cena za p≈Øjƒçen√≠ penƒõz</strong>. Kdy≈æ si p≈Øjƒçujete, plat√≠te √∫rok. Kdy≈æ p≈Øjƒçujete (spo≈ô√≠te), √∫rok dost√°vate.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-green-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">üìà</span>
                                <h4 class="font-semibold text-green-800">Kdy≈æ spo≈ô√≠te</h4>
                            </div>
                            <p class="text-green-700 text-sm">Banka v√°m plat√≠ √∫rok za to, ≈æe j√≠ p≈Øjƒçujete sv√© pen√≠ze. Va≈°e √∫spory rostou.</p>
                        </div>
                        
                        <div class="bg-red-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">üìâ</span>
                                <h4 class="font-semibold text-red-800">Kdy≈æ si p≈Øjƒçujete</h4>
                            </div>
                            <p class="text-red-700 text-sm">Plat√≠te bance √∫rok za to, ≈æe v√°m p≈Øjƒçila pen√≠ze. Dluh roste.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Personal Calculator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üí∞ Osobn√≠ kalkulaƒçka: "Kolik mƒõ dnes stoj√≠ 10 000 Kƒç za rok?"</h3>
                    <button onclick="skipSection(1, 'calculator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">√örokov√° sazba (%)</label>
                        <input type="number" id="interest-rate" value="5" min="0" max="20" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Inflace (%)</label>
                        <input type="number" id="inflation-rate" value="3" min="0" max="15" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Doba (roky)</label>
                        <input type="number" id="time-period" value="1" min="1" max="30" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                <button onclick="calculateInterest()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    Vypoƒç√≠tat
                </button>
                <div id="interest-result" class="mt-4 p-4 bg-white rounded-lg hidden">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600" id="nominal-value">-</div>
                            <div class="text-sm text-gray-600">Nomin√°ln√≠ hodnota</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="real-value">-</div>
                            <div class="text-sm text-gray-600">Re√°ln√° hodnota</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inflation Slider -->
            <div class="bg-yellow-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üìä Slider: Posu≈à inflaci ‚Üí uvid√≠≈° re√°ln√© %</h3>
                    <button onclick="skipSection(1, 'slider')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="slider-container mb-4">
                    <input type="range" id="inflation-slider" min="0" max="15" value="3" step="0.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-track">
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>0%</span>
                        <span>7.5%</span>
                        <span>15%</span>
                    </div>
                </div>
                <div class="text-center">
                    <div class="text-sm text-gray-600">Inflace: <span id="current-inflation" class="font-semibold">3%</span></div>
                    <div class="text-sm text-gray-600">Nomin√°ln√≠ sazba: <span class="font-semibold">5%</span></div>
                    <div class="text-lg font-bold text-green-600">Re√°ln√° sazba: <span id="real-rate">2.0%</span></div>
                </div>
            </div>

            <!-- Flip Cards -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üîÑ M√Ωty vs. Fakta - Klepni pro odhalen√≠ pravdy</h3>
                    <button onclick="skipSection(1, 'flip-cards')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="flip-card" onclick="flipCard(this, 1)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-red-100 border-2 border-red-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">‚ùå</div>
                                    <div class="font-semibold text-sm">M√ùTUS</div>
                                    <div class="text-xs">"Nejvy≈°≈°√≠ sazba je v≈ædy nejlep≈°√≠"</div>
                                </div>
                            </div>
                            <div class="flip-card-back bg-green-100 border-2 border-green-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">‚úÖ</div>
                                    <div class="font-semibold text-xs">FAKT: Z√°le≈æ√≠ na re√°ln√© sazbƒõ! Vysok√° nomin√°ln√≠ sazba p≈ôi je≈°tƒõ vy≈°≈°√≠ inflaci = ztr√°ta kupn√≠ s√≠ly.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flip-card" onclick="flipCard(this, 1)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front bg-red-100 border-2 border-red-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">‚ùå</div>
                                    <div class="font-semibold text-sm">M√ùTUS</div>
                                    <div class="text-xs">"Inflace je pro dlu≈æn√≠ky ≈°patn√°"</div>
                                </div>
                            </div>
                            <div class="flip-card-back bg-green-100 border-2 border-green-300">
                                <div class="text-center">
                                    <div class="text-2xl mb-2">‚úÖ</div>
                                    <div class="font-semibold text-xs">FAKT: Inflace sni≈æuje re√°lnou hodnotu dluhu! Dlu≈æn√≠ci s fixn√≠ sazbou p≈ôi r≈Østu inflace profituj√≠.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- APR vs EAR Box -->
            <div class="bg-orange-50 rounded-lg p-6 mb-6 border-l-4 border-orange-500">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">üî¢</span>
                    Nomin√°ln√≠ vs. Efektivn√≠ roƒçn√≠ sazba (EAR)
                </h3>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-semibold text-orange-800 mb-2">üìä Nomin√°ln√≠ sazba (APR)</h4>
                            <p class="text-sm text-gray-700 mb-2">12% roƒçnƒõ = 1% mƒõs√≠ƒçnƒõ</p>
                            <p class="text-xs text-gray-600">Jednoduch√© n√°soben√≠, bez slo≈æen√©ho √∫roƒçen√≠</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-green-800 mb-2">üöÄ Efektivn√≠ sazba (EAR)</h4>
                            <p class="text-sm text-gray-700 mb-2">12% s mƒõs√≠ƒçn√≠ kapitalizac√≠ = 12,68%</p>
                            <p class="text-xs text-gray-600">Skuteƒçn√Ω v√Ωnos vƒçetnƒõ slo≈æen√©ho √∫roƒçen√≠</p>
                        </div>
                    </div>
                </div>
                <div class="bg-yellow-100 rounded-lg p-3">
                    <p class="text-sm text-yellow-800">
                        üí° <strong>P≈ô√≠klad:</strong> Spo≈ôic√≠ √∫ƒçet "12% roƒçnƒõ" s mƒõs√≠ƒçn√≠m p≈ôipisov√°n√≠m √∫rok≈Ø ve skuteƒçnosti vydƒõl√° 12,68% za rok d√≠ky slo≈æen√©mu √∫roƒçen√≠!
                    </p>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-purple-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üß† Mikro-kv√≠z</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(1)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            üîÑ Restart
                        </button>
                        <button onclick="skipSection(1, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            P≈ôeskoƒçit ‚Üí
                        </button>
                    </div>
                </div>
                <div id="quiz-1" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">M√°m √∫spory s 4% √∫rokem. Inflace je 6%. Co se dƒõje s mou kupn√≠ silou?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(1, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) Roste o 4%
                            </button>
                            <button onclick="answerQuiz(1, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) Kles√° o 2%
                            </button>
                            <button onclick="answerQuiz(1, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) Z≈Øst√°v√° stejn√°
                            </button>
                        </div>
                        <div id="quiz-1-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">‚úÖ Spr√°vnƒõ! Re√°ln√° sazba = 4% - 6% = -2%. Va≈°e pen√≠ze ztr√°cej√≠ kupn√≠ s√≠lu.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="showOverview()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    ‚Üê Zpƒõt na p≈ôehled
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(1)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        P≈ôeskoƒçit lekci
                    </button>
                    <button id="next-lesson-1" onclick="startLesson(2)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        Dal≈°√≠ lekce ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 2 -->
        <div id="lesson-2" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">üè¶ Lekce 2: Jak sazby vznikaj√≠</h2>
                    <p class="text-gray-600">Centr√°ln√≠ banka, riziko, konkurence. Pochop√≠m, proƒç m√° ka≈æd√Ω jinou sazbu.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson2-progress" class="progress-bar bg-green-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson2-progress-text">0/4 dokonƒçeno</div>
                </div>
            </div>

            <!-- Central Bank Explanation -->
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 mb-6 border-l-4 border-green-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">üèõÔ∏è</span>
                    Centr√°ln√≠ banka = dirigent orchestru
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">üéº</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">Z√°kladn√≠ sazba ƒåNB:</h4>
                                <p class="text-gray-700">Toto je "nota", podle kter√© hraj√≠ v≈°echny banky. Kdy≈æ ƒåNB zv√Ω≈°√≠ sazbu, v≈°echny ostatn√≠ sazby jdou nahoru.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-blue-100 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">üìà</div>
                            <h4 class="font-semibold text-blue-800 mb-1">Vysok√° inflace</h4>
                            <p class="text-blue-700 text-sm">ƒåNB zv√Ω≈°√≠ sazby ‚Üí dra≈æ≈°√≠ p≈Øjƒçky ‚Üí m√©nƒõ utr√°cen√≠ ‚Üí ni≈æ≈°√≠ inflace</p>
                        </div>
                        
                        <div class="bg-red-100 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">üìâ</div>
                            <h4 class="font-semibold text-red-800 mb-1">Recese</h4>
                            <p class="text-red-700 text-sm">ƒåNB sn√≠≈æ√≠ sazby ‚Üí levnƒõj≈°√≠ p≈Øjƒçky ‚Üí v√≠ce investic ‚Üí r≈Øst ekonomiky</p>
                        </div>
                        
                        <div class="bg-green-100 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">‚öñÔ∏è</div>
                            <h4 class="font-semibold text-green-800 mb-1">Rovnov√°ha</h4>
                            <p class="text-green-700 text-sm">C√≠l: 2% inflace a stabiln√≠ ekonomika</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Risk Calculator -->
            <div class="bg-orange-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">‚ö†Ô∏è Kalkulaƒçka rizika: "Proƒç m√° ka≈æd√Ω jinou sazbu?"</h3>
                    <button onclick="skipSection(2, 'risk-calculator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">Vyberte profil klienta:</h4>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="client-type" value="safe" class="text-green-600" onchange="calculateRisk()">
                                <span>üü¢ Bezpeƒçn√Ω (st√°l√Ω p≈ô√≠jem, ≈æ√°dn√© dluhy)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="client-type" value="medium" class="text-yellow-600" onchange="calculateRisk()">
                                <span>üü° St≈ôedn√≠ riziko (pr≈Ømƒõrn√Ω p≈ô√≠jem, mal√© dluhy)</span>
                            </label>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="radio" name="client-type" value="risky" class="text-red-600" onchange="calculateRisk()">
                                <span>üî¥ Rizikov√Ω (nest√°l√Ω p≈ô√≠jem, vysok√© dluhy)</span>
                            </label>
                        </div>
                    </div>
                    <div id="risk-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-2">Va≈°e sazba:</h4>
                        <div class="text-3xl font-bold mb-2" id="client-rate">-</div>
                        <div class="text-sm text-gray-600" id="risk-explanation">-</div>
                    </div>
                </div>
            </div>

            <!-- Fixed vs Variable Rates -->
            <div class="bg-purple-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üîÑ Fixn√≠ vs. Variabiln√≠ sazby</h3>
                    <button onclick="skipSection(2, 'rate-types')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">üîí Fixn√≠ sazba</h4>
                        <p class="text-sm text-gray-700 mb-2">Sazba se nemƒõn√≠ po celou dobu fixace</p>
                        <div class="text-xs text-gray-600">
                            ‚úÖ Jistota v√Ω≈°e spl√°tky<br>
                            ‚ùå Nem≈Ø≈æete profitovat z poklesu sazeb
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-green-800 mb-2">üìà Variabiln√≠ sazba</h4>
                        <p class="text-sm text-gray-700 mb-2">Mƒõn√≠ se podle z√°kladn√≠ sazby ƒåNB</p>
                        <div class="text-xs text-gray-600">
                            ‚úÖ M≈Ø≈æete profitovat z poklesu sazeb<br>
                            ‚ùå Riziko r≈Østu spl√°tky
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg p-4">
                    <h4 class="font-semibold mb-3">üéÆ Simul√°tor: Zmƒõna z√°kladn√≠ sazby ƒåNB</h4>
                    <div class="flex items-center space-x-4 mb-3">
                        <span class="text-sm">Z√°kladn√≠ sazba ƒåNB:</span>
                        <input type="range" id="cnb-rate" min="0" max="10" value="2" step="0.5" class="flex-1">
                        <span id="cnb-rate-display" class="font-semibold">2.0%</span>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div class="text-center">
                            <div class="font-semibold">Fixn√≠ hypot√©ka</div>
                            <div class="text-lg font-bold text-blue-600">4.5%</div>
                            <div class="text-xs text-gray-600">Spl√°tka: 25 000 Kƒç</div>
                        </div>
                        <div class="text-center">
                            <div class="font-semibold">Variabiln√≠ hypot√©ka</div>
                            <div class="text-lg font-bold text-green-600" id="variable-rate">4.5%</div>
                            <div class="text-xs text-gray-600" id="variable-payment">Spl√°tka: 25 000 Kƒç</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bank Competition Game -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üèÅ Hra: Konkurence bank</h3>
                    <button onclick="skipSection(2, 'competition-game')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <p class="text-sm text-gray-600 mb-4">Kliknƒõte na banky a sledujte, jak se mƒõn√≠ sazby podle konkurence!</p>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="bank-card bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-blue-500 transition-colors" onclick="toggleBank('bank1')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üè¶</div>
                            <div class="font-semibold">Banka A</div>
                            <div class="text-lg font-bold text-blue-600" id="bank1-rate">5.5%</div>
                            <div class="text-xs text-gray-500" id="bank1-status">Aktivn√≠</div>
                        </div>
                    </div>
                    <div class="bank-card bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-blue-500 transition-colors" onclick="toggleBank('bank2')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üèõÔ∏è</div>
                            <div class="font-semibold">Banka B</div>
                            <div class="text-lg font-bold text-green-600" id="bank2-rate">5.2%</div>
                            <div class="text-xs text-gray-500" id="bank2-status">Aktivn√≠</div>
                        </div>
                    </div>
                    <div class="bank-card bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-blue-500 transition-colors" onclick="toggleBank('bank3')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üè¢</div>
                            <div class="font-semibold">Banka C</div>
                            <div class="text-lg font-bold text-purple-600" id="bank3-rate">5.8%</div>
                            <div class="text-xs text-gray-500" id="bank3-status">Aktivn√≠</div>
                        </div>
                    </div>
                </div>
                <div id="competition-result" class="bg-white rounded-lg p-4 text-center">
                    <div class="text-sm text-gray-600">Pr≈Ømƒõrn√° sazba na trhu: <span id="average-rate" class="font-bold">5.5%</span></div>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-yellow-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üß† Kv√≠z: Kdo urƒçuje sazby?</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(2)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            üîÑ Restart
                        </button>
                        <button onclick="skipSection(2, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            P≈ôeskoƒçit ‚Üí
                        </button>
                    </div>
                </div>
                <div id="quiz-2" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">ƒåNB zv√Ω≈°√≠ z√°kladn√≠ sazbu z 2% na 4%. Co se stane se sazbami hypot√©k?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(2, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) Z≈Østanou stejn√©
                            </button>
                            <button onclick="answerQuiz(2, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) Tak√© porostou
                            </button>
                            <button onclick="answerQuiz(2, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) Poklesnou
                            </button>
                        </div>
                        <div id="quiz-2-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">‚úÖ Spr√°vnƒõ! Kdy≈æ ƒåNB zv√Ω≈°√≠ sazbu, banky si p≈Øjƒçuj√≠ dr√°≈æ, tak≈æe i hypot√©ky zdra≈æuj√≠.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(1)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    ‚Üê P≈ôedchoz√≠ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(2)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        P≈ôeskoƒçit lekci
                    </button>
                    <button id="next-lesson-2" onclick="startLesson(3)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        Dal≈°√≠ lekce ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 3 -->
        <div id="lesson-3" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">üí≥ Lekce 3: RPSN bez lupy</h2>
                    <p class="text-gray-600">Roƒçn√≠ procentn√≠ sazba n√°klad≈Ø = skuteƒçn√° cena p≈Øjƒçky vƒçetnƒõ v≈°ech poplatk≈Ø.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson3-progress" class="progress-bar bg-yellow-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson3-progress-text">0/4 dokonƒçeno</div>
                </div>
            </div>

            <!-- RPSN Explanation -->
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6 mb-6 border-l-4 border-yellow-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">üîç</span>
                    RPSN = Pravdiv√° cena p≈Øjƒçky
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">üí°</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">Proƒç RPSN?</h4>
                                <p class="text-gray-700">√örokov√° sazba v√°m ne≈ôekne celou pravdu. RPSN zahrnuje <strong>v≈°echny n√°klady</strong> - poplatky, poji≈°tƒõn√≠, veden√≠ √∫ƒçtu...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">‚ùå</span>
                                <h4 class="font-semibold text-red-800">Jen √∫rokov√° sazba</h4>
                            </div>
                            <p class="text-red-700 text-sm">P≈Øjƒçka 5% - vypad√° levnƒõ, ale co poplatky za vy≈ô√≠zen√≠, poji≈°tƒõn√≠, veden√≠ √∫ƒçtu?</p>
                        </div>
                        
                        <div class="bg-green-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">‚úÖ</span>
                                <h4 class="font-semibold text-green-800">RPSN</h4>
                            </div>
                            <p class="text-green-700 text-sm">RPSN 8,5% - to je skuteƒçn√° cena vƒçetnƒõ v≈°ech skryt√Ωch n√°klad≈Ø!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RPSN Calculator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üßÆ RPSN kalkulaƒçka: Odhalte skryt√© n√°klady</h3>
                    <button onclick="skipSection(3, 'rpsn-calculator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">V√Ω≈°e p≈Øjƒçky (Kƒç)</label>
                            <input type="number" id="loan-amount" value="100000" min="10000" max="5000000" step="10000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">√örokov√° sazba (%)</label>
                            <input type="number" id="loan-rate" value="5" min="1" max="25" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Doba splatnosti (roky)</label>
                            <input type="number" id="loan-years" value="5" min="1" max="30" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Poplatek za vy≈ô√≠zen√≠ (Kƒç)</label>
                            <input type="number" id="setup-fee" value="2000" min="0" max="50000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Mƒõs√≠ƒçn√≠ poplatek (Kƒç)</label>
                            <input type="number" id="monthly-fee" value="50" min="0" max="500" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="calculateRPSN()" class="w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Vypoƒç√≠tat RPSN
                        </button>
                    </div>
                    <div id="rpsn-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">V√Ωsledek:</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>√örokov√° sazba:</span>
                                <span id="display-rate" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold text-red-600">
                                <span>RPSN:</span>
                                <span id="calculated-rpsn">-</span>
                            </div>
                            <div class="text-sm text-gray-600 mt-3">
                                <div>Celkov√© n√°klady: <span id="total-cost" class="font-semibold">-</span></div>
                                <div>Mƒõs√≠ƒçn√≠ spl√°tka: <span id="monthly-payment" class="font-semibold">-</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loan Comparison -->
            <div class="bg-green-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">‚öñÔ∏è Porovn√°n√≠ nab√≠dek: Kter√° je skuteƒçnƒõ levnƒõj≈°√≠?</h3>
                    <button onclick="skipSection(3, 'loan-comparison')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-3 gap-4 mb-4">
                    <div class="bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-green-500 transition-colors" onclick="selectLoan('loan1')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üè¶</div>
                            <div class="font-semibold">Banka A</div>
                            <div class="text-sm text-gray-600">√örok: 4,5%</div>
                            <div class="text-sm text-gray-600">Poplatek: 5 000 Kƒç</div>
                            <div class="text-lg font-bold text-blue-600" id="loan1-rpsn">RPSN: ?</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-green-500 transition-colors" onclick="selectLoan('loan2')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üèõÔ∏è</div>
                            <div class="font-semibold">Banka B</div>
                            <div class="text-sm text-gray-600">√örok: 6,0%</div>
                            <div class="text-sm text-gray-600">Poplatek: 0 Kƒç</div>
                            <div class="text-lg font-bold text-green-600" id="loan2-rpsn">RPSN: ?</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border-2 cursor-pointer hover:border-green-500 transition-colors" onclick="selectLoan('loan3')">
                        <div class="text-center">
                            <div class="text-2xl mb-2">üè¢</div>
                            <div class="font-semibold">Banka C</div>
                            <div class="text-sm text-gray-600">√örok: 5,2%</div>
                            <div class="text-sm text-gray-600">Poplatek: 1 500 Kƒç</div>
                            <div class="text-lg font-bold text-purple-600" id="loan3-rpsn">RPSN: ?</div>
                        </div>
                    </div>
                </div>
                <div id="comparison-result" class="bg-white rounded-lg p-4 text-center hidden">
                    <div class="text-lg font-semibold mb-2">V√Ωsledek porovn√°n√≠:</div>
                    <div id="best-loan" class="text-green-600 font-bold">-</div>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-purple-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üß† Kv√≠z: RPSN vs. √∫rokov√° sazba</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(3)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            üîÑ Restart
                        </button>
                        <button onclick="skipSection(3, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            P≈ôeskoƒçit ‚Üí
                        </button>
                    </div>
                </div>
                <div id="quiz-3" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">P≈Øjƒçka A: 4% √∫rok + 3000 Kƒç poplatek. P≈Øjƒçka B: 5% √∫rok + 0 Kƒç poplatek. Kter√° je levnƒõj≈°√≠?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(3, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) P≈Øjƒçka A (ni≈æ≈°√≠ √∫rok)
                            </button>
                            <button onclick="answerQuiz(3, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) Z√°le≈æ√≠ na RPSN
                            </button>
                            <button onclick="answerQuiz(3, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) P≈Øjƒçka B (bez poplatk≈Ø)
                            </button>
                        </div>
                        <div id="quiz-3-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">‚úÖ Spr√°vnƒõ! RPSN zahrnuje v≈°echny n√°klady, tak≈æe jen podle nƒõj pozn√°te skuteƒçnƒõ levnƒõj≈°√≠ p≈Øjƒçku.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(2)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    ‚Üê P≈ôedchoz√≠ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(3)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        P≈ôeskoƒçit lekci
                    </button>
                    <button id="next-lesson-3" onclick="startLesson(4)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        Dal≈°√≠ lekce ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 4 -->
        <div id="lesson-4" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">üìà Lekce 4: Slo≈æen√© kouzlo</h2>
                    <p class="text-gray-600">Slo≈æen√© √∫roƒçen√≠ = "osm√Ω div svƒõta". ƒåas je v√°≈° nejlep≈°√≠ p≈ô√≠tel.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson4-progress" class="progress-bar bg-purple-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson4-progress-text">0/4 dokonƒçeno</div>
                </div>
            </div>

            <!-- Compound Interest Explanation -->
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 mb-6 border-l-4 border-purple-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">ü™Ñ</span>
                    Slo≈æen√© √∫roƒçen√≠ = kouzlo ƒçasu
                </h3>
                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="text-2xl">üí´</div>
                            <div>
                                <h4 class="font-semibold text-gray-900 mb-2">Jak to funguje?</h4>
                                <p class="text-gray-700">Nez√≠sk√°v√°te √∫rok jen z p≈Øvodn√≠ ƒç√°stky, ale i <strong>z d≈ô√≠ve z√≠skan√Ωch √∫rok≈Ø</strong>. √öroky "rod√≠" dal≈°√≠ √∫roky!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">üìä</span>
                                <h4 class="font-semibold text-red-800">Jednoduch√© √∫roƒçen√≠</h4>
                            </div>
                            <p class="text-red-700 text-sm">10 000 Kƒç √ó 5% = 500 Kƒç roƒçnƒõ. Po 10 letech: 15 000 Kƒç</p>
                        </div>
                        
                        <div class="bg-green-100 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <span class="text-xl mr-2">üöÄ</span>
                                <h4 class="font-semibold text-green-800">Slo≈æen√© √∫roƒçen√≠</h4>
                            </div>
                            <p class="text-green-700 text-sm">10 000 Kƒç √ó 5% slo≈æenƒõ. Po 10 letech: 16 289 Kƒç!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mini Visualization -->
            <div class="bg-indigo-50 rounded-lg p-6 mb-6 border-l-4 border-indigo-500">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">üìä</span>
                    Vizualizace: P≈ô√≠mka vs. K≈ôivka
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-red-800 mb-2">üìà Jednoduch√© √∫roƒçen√≠</h4>
                        <div class="h-20 bg-gradient-to-r from-red-200 to-red-400 rounded flex items-end">
                            <div class="w-full h-1 bg-red-600"></div>
                        </div>
                        <p class="text-xs text-gray-600 mt-2">Line√°rn√≠ r≈Øst - st√°le stejn√Ω p≈ô√≠r≈Østek</p>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-green-800 mb-2">üöÄ Slo≈æen√© √∫roƒçen√≠</h4>
                        <div class="h-20 bg-gradient-to-r from-green-200 to-green-400 rounded flex items-end">
                            <div class="w-full h-4 bg-green-600 rounded-tl-full"></div>
                        </div>
                        <p class="text-xs text-gray-600 mt-2">Exponenci√°ln√≠ r≈Øst - zrychluje se ƒçasem</p>
                    </div>
                </div>
            </div>

            <!-- Compound Interest Simulator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üéÆ Simul√°tor: Sledujte, jak pen√≠ze rostou</h3>
                    <button onclick="skipSection(4, 'compound-simulator')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Poƒç√°teƒçn√≠ vklad (Kƒç)</label>
                            <input type="number" id="initial-amount" value="10000" min="1000" max="1000000" step="1000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Mƒõs√≠ƒçn√≠ vklad (Kƒç)</label>
                            <input type="number" id="monthly-deposit" value="1000" min="0" max="50000" step="100" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Roƒçn√≠ √∫rok (%)</label>
                            <input type="number" id="compound-rate" value="6" min="0" max="15" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Doba spo≈ôen√≠ (roky)</label>
                            <input type="range" id="years-slider" min="1" max="40" value="10" class="w-full">
                            <div class="text-center text-sm text-gray-600">
                                <span id="years-display">10</span> let
                            </div>
                        </div>
                        <button onclick="runCompoundSimulation()" class="w-full bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            Spustit simulaci
                        </button>
                    </div>
                    <div id="compound-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">V√Ωsledek po <span id="result-years">10</span> letech:</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>Vlo≈æeno celkem:</span>
                                <span id="total-invested" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Z√≠skan√© √∫roky:</span>
                                <span id="total-interest" class="font-semibold text-green-600">-</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold text-purple-600">
                                <span>Celkov√° hodnota:</span>
                                <span id="final-amount">-</span>
                            </div>
                            <div class="mt-4 p-3 bg-yellow-100 rounded-lg">
                                <div class="text-sm text-yellow-800">
                                    üí° <span id="compound-insight">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rule of 72 -->
            <div class="bg-green-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üéØ Pravidlo 72: Kdy se pen√≠ze zdvojn√°sob√≠?</h3>
                    <button onclick="skipSection(4, 'rule-72')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">üßÆ</div>
                        <div class="text-lg font-semibold">72 √∑ √∫rokov√° sazba = roky do zdvojn√°soben√≠</div>
                    </div>
                </div>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="calculateRule72(3)">
                        <div class="text-2xl mb-2">üêå</div>
                        <div class="font-semibold">3% √∫rok</div>
                        <div class="text-lg font-bold text-red-600" id="rule72-3">24 let</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="calculateRule72(6)">
                        <div class="text-2xl mb-2">üö∂</div>
                        <div class="font-semibold">6% √∫rok</div>
                        <div class="text-lg font-bold text-yellow-600" id="rule72-6">12 let</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors" onclick="calculateRule72(9)">
                        <div class="text-2xl mb-2">üèÉ</div>
                        <div class="font-semibold">9% √∫rok</div>
                        <div class="text-lg font-bold text-green-600" id="rule72-9">8 let</div>
                    </div>
                </div>
                <div id="rule72-explanation" class="mt-4 p-3 bg-blue-100 rounded-lg hidden">
                    <div class="text-sm text-blue-800">
                        <span id="rule72-text">-</span>
                    </div>
                </div>
            </div>

            <!-- Mini Quiz -->
            <div class="bg-orange-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üß† Kv√≠z: S√≠la slo≈æen√©ho √∫roƒçen√≠</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(4)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            üîÑ Restart
                        </button>
                        <button onclick="skipSection(4, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            P≈ôeskoƒçit ‚Üí
                        </button>
                    </div>
                </div>
                <div id="quiz-4" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">M√°te 100 000 Kƒç s 8% roƒçn√≠m √∫rokem. Za kolik let se zdvojn√°sob√≠?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(4, 'A', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) 12,5 let (100 000 √∑ 8 000)
                            </button>
                            <button onclick="answerQuiz(4, 'B', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) 9 let (pravidlo 72)
                            </button>
                            <button onclick="answerQuiz(4, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) 8 let (stejnƒõ jako √∫rok)
                            </button>
                        </div>
                        <div id="quiz-4-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">‚úÖ Spr√°vnƒõ! Pravidlo 72: 72 √∑ 8 = 9 let. Slo≈æen√© √∫roƒçen√≠ je rychlej≈°√≠ ne≈æ jednoduch√© poƒç√≠t√°n√≠!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(3)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    ‚Üê P≈ôedchoz√≠ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(4)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        P≈ôeskoƒçit lekci
                    </button>
                    <button id="next-lesson-4" onclick="startLesson(5)" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        Dal≈°√≠ lekce ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Lesson 5 -->
        <div id="lesson-5" class="lesson hidden bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">üéØ Lekce 5: Strategie v praxi</h2>
                    <p class="text-gray-600">Konkr√©tn√≠ kroky pro spo≈ôen√≠, investov√°n√≠ a spl√°cen√≠ dluh≈Ø.</p>
                </div>
                <div class="text-right">
                    <div class="w-20 bg-gray-200 rounded-full h-2">
                        <div id="lesson5-progress" class="progress-bar bg-red-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lesson5-progress-text">0/4 dokonƒçeno</div>
                </div>
            </div>

            <!-- Strategy Framework -->
            <div class="bg-gradient-to-r from-red-50 to-pink-50 rounded-lg p-6 mb-6 border-l-4 border-red-500">
                <h3 class="text-xl font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">üó∫Ô∏è</span>
                    Finanƒçn√≠ strategie krok za krokem
                </h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg p-4">
                        <div class="text-2xl mb-2">1Ô∏è‚É£</div>
                        <h4 class="font-semibold text-gray-900 mb-2">Nouzov√Ω fond</h4>
                        <p class="text-gray-700 text-sm">3-6 mƒõs√≠ƒçn√≠ch v√Ωdaj≈Ø na spo≈ôic√≠m √∫ƒçtu s rychl√Ωm p≈ô√≠stupem</p>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <div class="text-2xl mb-2">2Ô∏è‚É£</div>
                        <h4 class="font-semibold text-gray-900 mb-2">Splatit dluhy</h4>
                        <p class="text-gray-700 text-sm">Nejd≈ô√≠ve vysoko√∫roƒçen√© dluhy (kreditky, rychl√© p≈Øjƒçky)</p>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <div class="text-2xl mb-2">3Ô∏è‚É£</div>
                        <h4 class="font-semibold text-gray-900 mb-2">Investovat</h4>
                        <p class="text-gray-700 text-sm">Dlouhodob√© spo≈ôen√≠ s vy≈°≈°√≠m v√Ωnosem</p>
                    </div>
                </div>
            </div>

            <!-- Debt Psychology -->
            <div class="bg-pink-50 rounded-lg p-6 mb-6 border-l-4 border-pink-500">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="text-2xl mr-3">üß†</span>
                    Psychologie spl√°cen√≠ dluh≈Ø
                </h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-blue-800 mb-2">‚ùÑÔ∏è Debt Snowball (snƒõhov√° koule)</h4>
                        <p class="text-sm text-gray-700 mb-2">Spl√°cejte nejd≈ô√≠ve nejmen≈°√≠ dluhy</p>
                        <div class="text-xs text-gray-600">
                            ‚úÖ Rychl√© √∫spƒõchy = motivace<br>
                            ‚úÖ Psychologicky snaz≈°√≠<br>
                            ‚ùå Matematicky ne v≈ædy optim√°ln√≠
                        </div>
                    </div>
                    <div class="bg-white rounded-lg p-4">
                        <h4 class="font-semibold text-red-800 mb-2">üèîÔ∏è Debt Avalanche (lavina)</h4>
                        <p class="text-sm text-gray-700 mb-2">Spl√°cejte nejd≈ô√≠ve nejvy≈°≈°√≠ √∫roky</p>
                        <div class="text-xs text-gray-600">
                            ‚úÖ Matematicky optim√°ln√≠<br>
                            ‚úÖ U≈°et≈ô√≠te nejv√≠c penƒõz<br>
                            ‚ùå Pomalej≈°√≠ psychologick√© uspokojen√≠
                        </div>
                    </div>
                </div>
                <div class="bg-yellow-100 rounded-lg p-3 mt-4">
                    <p class="text-sm text-yellow-800">
                        üí° <strong>Tip:</strong> Vyberte si metodu podle sv√© osobnosti. Pot≈ôebujete motivaci? Snowball. Chcete u≈°et≈ôit maximum? Avalanche.
                    </p>
                </div>
            </div>

            <!-- Debt vs Investment Calculator -->
            <div class="bg-blue-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">‚öñÔ∏è Rozhodovaƒç: Spl√°cet nebo investovat?</h3>
                    <button onclick="skipSection(5, 'debt-investment')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">√örok na dluhu (%)</label>
                            <input type="number" id="debt-rate" value="8" min="1" max="30" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Oƒçek√°van√Ω v√Ωnos investice (%)</label>
                            <input type="number" id="investment-return" value="6" min="1" max="20" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Dostupn√° ƒç√°stka (Kƒç)</label>
                            <input type="number" id="available-money" value="50000" min="1000" max="1000000" step="1000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="calculateDebtVsInvestment()" class="w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Co je lep≈°√≠?
                        </button>
                    </div>
                    <div id="debt-investment-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">Doporuƒçen√≠:</h4>
                        <div id="recommendation" class="text-lg font-bold mb-3">-</div>
                        <div id="recommendation-explanation" class="text-sm text-gray-600 mb-3">-</div>
                        <div class="space-y-2 text-sm">
                            <div>√öspora za rok p≈ôi spl√°cen√≠: <span id="debt-savings" class="font-semibold">-</span></div>
                            <div>Zisk za rok p≈ôi investov√°n√≠: <span id="investment-gain" class="font-semibold">-</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Savings Goal Planner -->
            <div class="bg-green-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üéØ Pl√°novaƒç c√≠l≈Ø: Jak dos√°hnout sv√©ho snu?</h3>
                    <button onclick="skipSection(5, 'savings-planner')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                        P≈ôeskoƒçit ‚Üí
                    </button>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">V√°≈° c√≠l</label>
                            <select id="savings-goal" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" onchange="updateGoalAmount()">
                                <option value="car">Auto (500 000 Kƒç)</option>
                                <option value="house">D≈Øm (2 000 000 Kƒç)</option>
                                <option value="vacation">Dovolen√° (50 000 Kƒç)</option>
                                <option value="custom">Vlastn√≠ ƒç√°stka</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">C√≠lov√° ƒç√°stka (Kƒç)</label>
                            <input type="number" id="goal-amount" value="500000" min="10000" max="10000000" step="10000" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Za kolik let chcete dos√°hnout c√≠le?</label>
                            <input type="number" id="goal-years" value="5" min="1" max="30" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Oƒçek√°van√Ω roƒçn√≠ v√Ωnos (%)</label>
                            <input type="number" id="goal-return" value="5" min="0" max="15" step="0.1" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <button onclick="calculateSavingsGoal()" class="w-full bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            Vypoƒç√≠tat pl√°n
                        </button>
                    </div>
                    <div id="savings-goal-result" class="bg-white rounded-lg p-4 hidden">
                        <h4 class="font-semibold mb-4">V√°≈° spo≈ôic√≠ pl√°n:</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>C√≠l:</span>
                                <span id="display-goal" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Doba:</span>
                                <span id="display-years" class="font-semibold">-</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold text-green-600">
                                <span>Mƒõs√≠ƒçn√≠ vklad:</span>
                                <span id="monthly-savings">-</span>
                            </div>
                            <div class="mt-4 p-3 bg-blue-100 rounded-lg">
                                <div class="text-sm text-blue-800">
                                    üí° <span id="savings-tip">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Quiz -->
            <div class="bg-yellow-50 rounded-lg p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">üèÜ Z√°vƒõreƒçn√Ω test: Jste p≈ôipraveni?</h3>
                    <div class="space-x-2">
                        <button onclick="restartQuiz(5)" class="text-sm text-blue-600 hover:text-blue-800 underline">
                            üîÑ Restart
                        </button>
                        <button onclick="skipSection(5, 'quiz')" class="text-sm text-gray-500 hover:text-gray-700 underline">
                            P≈ôeskoƒçit ‚Üí
                        </button>
                    </div>
                </div>
                <div id="quiz-5" class="quiz-container">
                    <div class="quiz-question mb-4">
                        <p class="font-medium mb-3">M√°te 20 000 Kƒç nav√≠c. Dluh na kreditce 15% vs. investice s oƒçek√°van√Ωm v√Ωnosem 7%. Co udƒõl√°te?</p>
                        <div class="space-y-2">
                            <button onclick="answerQuiz(5, 'A', true)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                A) Splat√≠m dluh (15% > 7%)
                            </button>
                            <button onclick="answerQuiz(5, 'B', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                B) Investujem (diverzifikace)
                            </button>
                            <button onclick="answerQuiz(5, 'C', false)" class="quiz-option w-full text-left p-3 bg-white rounded-lg border hover:bg-blue-50 transition-colors">
                                C) P≈Øl na p≈Øl
                            </button>
                        </div>
                        <div id="quiz-5-result" class="mt-3 p-3 rounded-lg hidden">
                            <p class="font-medium text-green-700">‚úÖ Spr√°vnƒõ! V≈ædy nejd≈ô√≠ve spla≈•te vysoko√∫roƒçen√© dluhy. Garantovan√° "√∫spora" 15% je lep≈°√≠ ne≈æ nejist√Ω v√Ωnos 7%.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Central Bank Game -->
            <div id="central-bank-game" class="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-6 mb-6 hidden border-2 border-indigo-300">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4 animate-bounce">üèõÔ∏è</div>
                    <h3 class="text-3xl font-bold text-gray-900 mb-4">üéÆ Hra: Jste guvern√©r ƒåNB!</h3>
                    <p class="text-lg text-gray-700 mb-4">Rozhodujte o √∫rokov√Ωch sazb√°ch a sledujte, jak reaguje ekonomika!</p>
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <div class="text-sm text-gray-600 mb-2">V√°≈° c√≠l: Udr≈æet inflaci kolem 2% a ekonomiku stabiln√≠</div>
                        <div class="flex justify-center space-x-6">
                            <div class="text-center">
                                <div class="text-lg font-bold text-blue-600" id="game-inflation">3.5%</div>
                                <div class="text-xs text-gray-500">Inflace</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-green-600" id="game-growth">2.1%</div>
                                <div class="text-xs text-gray-500">R≈Øst HDP</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-purple-600" id="game-unemployment">4.2%</div>
                                <div class="text-xs text-gray-500">Nezamƒõstnanost</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="bg-white rounded-lg p-6 mb-6">
                    <div class="text-center mb-4">
                        <h4 class="text-xl font-semibold mb-2">Z√°kladn√≠ √∫rokov√° sazba ƒåNB</h4>
                        <div class="text-4xl font-bold text-indigo-600 mb-4" id="current-cnb-rate">2.0%</div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button onclick="changeCNBRate(-0.5)" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                üìâ Sn√≠≈æit o 0.5%
                            </button>
                            <button onclick="changeCNBRate(-0.25)" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                üìâ -0.25%
                            </button>
                            <button onclick="changeCNBRate(0.25)" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                üìà +0.25%
                            </button>
                            <button onclick="changeCNBRate(0.5)" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95">
                                üìà Zv√Ω≈°it o 0.5%
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Economic Indicators with Animations -->
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-white rounded-lg p-4 border-2 border-transparent transition-all duration-500" id="inflation-card">
                        <div class="text-center">
                            <div class="text-3xl mb-2" id="inflation-emoji">üî•</div>
                            <h4 class="font-semibold text-gray-900 mb-2">Inflace</h4>
                            <div class="text-2xl font-bold mb-2" id="inflation-display">3.5%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                                <div class="bg-red-500 h-2 rounded-full transition-all duration-1000" id="inflation-bar" style="width: 70%"></div>
                            </div>
                            <div class="text-xs text-gray-600" id="inflation-status">Nad c√≠lem</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border-2 border-transparent transition-all duration-500" id="growth-card">
                        <div class="text-center">
                            <div class="text-3xl mb-2" id="growth-emoji">üìà</div>
                            <h4 class="font-semibold text-gray-900 mb-2">R≈Øst HDP</h4>
                            <div class="text-2xl font-bold mb-2" id="growth-display">2.1%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                                <div class="bg-green-500 h-2 rounded-full transition-all duration-1000" id="growth-bar" style="width: 42%"></div>
                            </div>
                            <div class="text-xs text-gray-600" id="growth-status">Zdrav√Ω r≈Øst</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border-2 border-transparent transition-all duration-500" id="unemployment-card">
                        <div class="text-center">
                            <div class="text-3xl mb-2" id="unemployment-emoji">üë•</div>
                            <h4 class="font-semibold text-gray-900 mb-2">Nezamƒõstnanost</h4>
                            <div class="text-2xl font-bold mb-2" id="unemployment-display">4.2%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                                <div class="bg-yellow-500 h-2 rounded-full transition-all duration-1000" id="unemployment-bar" style="width: 42%"></div>
                            </div>
                            <div class="text-xs text-gray-600" id="unemployment-status">P≈ôijateln√°</div>
                        </div>
                    </div>
                </div>

                <!-- Market Reactions -->
                <div class="bg-white rounded-lg p-6 mb-6">
                    <h4 class="text-lg font-semibold mb-4 text-center">üìä Reakce trhu</h4>
                    <div class="grid md:grid-cols-4 gap-4">
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="housing-market">
                            <div class="text-2xl mb-2">üè†</div>
                            <div class="font-semibold text-sm">Hypot√©ky</div>
                            <div class="text-lg font-bold" id="mortgage-rate">4.5%</div>
                            <div class="text-xs" id="housing-trend">üìà Rostou</div>
                        </div>
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="savings-market">
                            <div class="text-2xl mb-2">üí∞</div>
                            <div class="font-semibold text-sm">Spo≈ôen√≠</div>
                            <div class="text-lg font-bold" id="savings-rate">2.8%</div>
                            <div class="text-xs" id="savings-trend">üìà Rostou</div>
                        </div>
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="business-market">
                            <div class="text-2xl mb-2">üè¢</div>
                            <div class="font-semibold text-sm">Podnik√°n√≠</div>
                            <div class="text-lg font-bold" id="business-loans">6.2%</div>
                            <div class="text-xs" id="business-trend">üìà Dra≈æ≈°√≠</div>
                        </div>
                        <div class="text-center p-3 rounded-lg transition-all duration-500" id="currency-market">
                            <div class="text-2xl mb-2">üí±</div>
                            <div class="font-semibold text-sm">Koruna</div>
                            <div class="text-lg font-bold" id="currency-strength">+0.5%</div>
                            <div class="text-xs" id="currency-trend">üí™ Silnƒõj≈°√≠</div>
                        </div>
                    </div>
                </div>

                <!-- Game Events -->
                <div id="game-events" class="bg-yellow-50 rounded-lg p-4 mb-6 hidden border-l-4 border-yellow-500">
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl" id="event-emoji">‚ö°</div>
                        <div>
                            <h4 class="font-semibold text-yellow-800 mb-1">Ekonomick√° ud√°lost!</h4>
                            <p class="text-sm text-yellow-700" id="event-text">Nƒõco se dƒõje v ekonomice...</p>
                        </div>
                    </div>
                </div>

                <!-- Score and Feedback -->
                <div class="bg-white rounded-lg p-6 mb-6">
                    <div class="text-center">
                        <h4 class="text-lg font-semibold mb-4">üèÜ Va≈°e hodnocen√≠</h4>
                        <div class="flex justify-center space-x-8 mb-4">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600" id="game-score">85</div>
                                <div class="text-sm text-gray-600">Sk√≥re</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600" id="game-quarters">1</div>
                                <div class="text-sm text-gray-600">ƒåtvrtlet√≠</div>
                            </div>
                        </div>
                        <div class="bg-gray-200 rounded-full h-3 mb-2">
                            <div class="bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-1000" id="score-bar" style="width: 85%"></div>
                        </div>
                        <div class="text-sm text-gray-600" id="performance-feedback">Dobr√° pr√°ce! Ekonomika je stabiln√≠.</div>
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="text-center">
                    <button onclick="resetGame()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg mr-4 transition-colors">
                        üîÑ Restart hry
                    </button>
                    <button onclick="nextQuarter()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2 rounded-lg font-semibold transition-all transform hover:scale-105">
                        ‚è≠Ô∏è Dal≈°√≠ ƒçtvrtlet√≠
                    </button>
                </div>
            </div>

            <!-- Course Completion -->
            <div id="course-completion" class="bg-gradient-to-r from-green-100 to-blue-100 rounded-lg p-6 mb-6 hidden">
                <div class="text-center">
                    <div class="text-6xl mb-4">üéâ</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Gratulujeme! Kurz dokonƒçen!</h3>
                    <p class="text-lg text-gray-700 mb-6">Nyn√≠ m√°te praktick√© n√°stroje pro chytr√© rozhodov√°n√≠ o penƒõz√≠ch. Pou≈æ√≠vejte je!</p>
                    <div class="grid md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-white rounded-lg p-4">
                            <div class="text-2xl mb-2">‚úÖ</div>
                            <div class="font-semibold">Rozum√≠te √∫rok≈Øm</div>
                            <div class="text-sm text-gray-600">Nomin√°ln√≠ vs. re√°ln√© sazby</div>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <div class="text-2xl mb-2">‚úÖ</div>
                            <div class="font-semibold">Zn√°te RPSN</div>
                            <div class="text-sm text-gray-600">Skuteƒçn√° cena p≈Øjƒçek</div>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <div class="text-2xl mb-2">‚úÖ</div>
                            <div class="font-semibold">Ovl√°d√°te slo≈æen√© √∫roƒçen√≠</div>
                            <div class="text-sm text-gray-600">S√≠la ƒçasu a trpƒõlivosti</div>
                        </div>
                    </div>
                    <button onclick="startCentralBankGame()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded-lg font-semibold text-lg transition-all transform hover:scale-105 mb-4">
                        üéÆ Zahrajte si na centr√°ln√≠ banku!
                    </button>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between mt-6">
                <button onclick="startLesson(4)" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    ‚Üê P≈ôedchoz√≠ lekce
                </button>
                <div class="space-x-3">
                    <button onclick="skipLesson(5)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        P≈ôeskoƒçit lekci
                    </button>
                    <button id="finish-course" onclick="finishCourse()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">
                        Dokonƒçit kurz! üéâ
                    </button>
                </div>
            </div>
        </div>

        <!-- Bonus Card (appears randomly) -->
        <div id="bonus-card" class="bonus-card fixed top-20 right-4 bg-yellow-400 text-black p-4 rounded-lg shadow-lg hidden z-40 max-w-xs">
            <div class="flex items-center justify-between mb-2">
                <div class="font-bold">üéÅ Bonus tip!</div>
                <button onclick="closeBonusCard()" class="text-black hover:text-gray-700">‚úï</button>
            </div>
            <div id="bonus-content" class="text-sm">
                üí° Vƒõdƒõli jste, ≈æe Albert Einstein nazval slo≈æen√© √∫roƒçen√≠ "osm√Ωm divem svƒõta"?
            </div>
        </div>

        <!-- Achievement Badge -->
        <div id="achievement-badge" class="fixed bottom-4 right-4 bg-green-500 text-white p-4 rounded-full shadow-lg hidden z-40">
            <div class="text-2xl">üèÜ</div>
        </div>
    </main>

    <script>
        let currentLesson = 0;
        let lessonProgress = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
        let completedActions = {1: [], 2: [], 3: [], 4: [], 5: []};
        let streak = 0;
        let bonusShown = false;
        let flippedCards = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};

        function startLesson(lessonNum) {
            currentLesson = lessonNum;
            document.getElementById('overview').classList.add('hidden');
            document.querySelectorAll('.lesson').forEach(l => l.classList.add('hidden'));
            document.getElementById(`lesson-${lessonNum}`).classList.remove('hidden');
            
            // Update lesson status in overview
            updateLessonOverviewStatus(lessonNum, 'started');
            
            // Reset lesson progress if starting fresh
            if (lessonProgress[lessonNum] === 0) {
                updateLessonProgress(lessonNum);
            }
        }

        function showOverview() {
            document.querySelectorAll('.lesson').forEach(l => l.classList.add('hidden'));
            document.getElementById('overview').classList.remove('hidden');
            currentLesson = 0;
        }

        function updateLessonProgress(lessonNum) {
            const progress = lessonProgress[lessonNum];
            const progressBar = document.getElementById(`lesson${lessonNum}-progress`);
            const progressText = document.getElementById(`lesson${lessonNum}-progress-text`);
            
            if (progressBar) {
                progressBar.style.width = `${(progress / 4) * 100}%`;
            }
            if (progressText) {
                progressText.textContent = `${progress}/4 dokonƒçeno`;
            }
            
            // Update overall progress
            const totalProgress = Object.values(lessonProgress).reduce((a, b) => a + b, 0);
            const overallProgress = document.getElementById('overall-progress');
            const overallPercentage = document.getElementById('overall-percentage');
            const percentage = Math.min(100, (totalProgress / 20) * 100);
            
            if (overallProgress) {
                overallProgress.style.width = `${percentage}%`;
            }
            if (overallPercentage) {
                overallPercentage.textContent = `${Math.round(percentage)}%`;
            }
            
            // Show next lesson button when lesson is complete
            if (progress >= 4) {
                const nextButton = document.getElementById(`next-lesson-${lessonNum}`);
                if (nextButton) {
                    nextButton.classList.remove('hidden');
                }
                
                // Update lesson status in overview
                updateLessonOverviewStatus(lessonNum, 'completed');
                
                // Show lesson completion celebration
                showLessonCompletion(lessonNum);
                
                // Show finish button for lesson 5
                if (lessonNum === 5) {
                    const finishButton = document.getElementById('finish-course');
                    if (finishButton) {
                        finishButton.classList.remove('hidden');
                    }
                }
                
                // Streak tracking
                streak++;
                if (streak >= 2) {
                    showAchievement();
                }
            }
            
            // Random bonus card
            if (progress === 2 && !bonusShown && Math.random() < 0.35) {
                showBonusCard();
                bonusShown = true;
            }
        }

        function updateLessonOverviewStatus(lessonNum, status) {
            const statusElement = document.getElementById(`lesson${lessonNum}-overview-status`);
            if (statusElement) {
                switch(status) {
                    case 'started':
                        statusElement.textContent = 'üîÑ Prob√≠h√°';
                        statusElement.className = 'text-xs mt-1 text-blue-600';
                        break;
                    case 'completed':
                        statusElement.textContent = '‚úÖ Dokonƒçeno';
                        statusElement.className = 'text-xs mt-1 text-green-600';
                        break;
                    case 'skipped':
                        statusElement.textContent = '‚è≠Ô∏è P≈ôeskoƒçeno';
                        statusElement.className = 'text-xs mt-1 text-gray-500';
                        break;
                }
            }
        }

        function markActionComplete(lessonNum, actionId) {
            if (!completedActions[lessonNum].includes(actionId)) {
                completedActions[lessonNum].push(actionId);
                lessonProgress[lessonNum]++;
                updateLessonProgress(lessonNum);
                saveProgress();
                
                // Celebration animation
                const element = document.querySelector(`[data-action="${actionId}"]`) || document.activeElement;
                if (element) {
                    element.classList.add('celebration');
                    setTimeout(() => element.classList.remove('celebration'), 600);
                }
            }
        }

        function skipSection(lessonNum, sectionId) {
            markActionComplete(lessonNum, sectionId);
        }

        function skipLesson(lessonNum) {
            // Mark lesson as skipped but don't add to progress
            updateLessonOverviewStatus(lessonNum, 'skipped');
            
            // Show next lesson button without completing progress
            const nextButton = document.getElementById(`next-lesson-${lessonNum}`);
            if (nextButton) {
                nextButton.classList.remove('hidden');
            }
            
            // Show finish button for lesson 5
            if (lessonNum === 5) {
                const finishButton = document.getElementById('finish-course');
                if (finishButton) {
                    finishButton.classList.remove('hidden');
                }
            }
        }

        // Lesson 1 functions
        function calculateInterest() {
            const rate = parseFloat(document.getElementById('interest-rate').value);
            const inflation = parseFloat(document.getElementById('inflation-rate').value);
            const time = parseFloat(document.getElementById('time-period').value);
            
            const nominal = 10000 * Math.pow(1 + rate/100, time);
            const real = nominal / Math.pow(1 + inflation/100, time);
            
            document.getElementById('nominal-value').textContent = `${nominal.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('real-value').textContent = `${real.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('interest-result').classList.remove('hidden');
            
            markActionComplete(1, 'calculator');
        }

        function updateInflationSlider() {
            const inflation = parseFloat(document.getElementById('inflation-slider').value);
            const nominalRate = 5; // Fixed for demo
            const realRate = nominalRate - inflation;
            
            document.getElementById('current-inflation').textContent = `${inflation}%`;
            document.getElementById('real-rate').textContent = `${realRate.toFixed(1)}%`;
            
            markActionComplete(1, 'slider');
        }

        function flipCard(card, lessonNum) {
            card.classList.toggle('flipped');
            flippedCards[lessonNum]++;
            
            if (flippedCards[lessonNum] >= 2) {
                markActionComplete(lessonNum, 'flip-cards');
            }
        }

        function answerQuiz(lessonNum, answer, isCorrect) {
            const resultDiv = document.getElementById(`quiz-${lessonNum}-result`);
            const options = document.querySelectorAll(`#quiz-${lessonNum} .quiz-option`);
            
            options.forEach(option => {
                option.disabled = true;
                option.classList.add('opacity-50');
            });
            
            if (isCorrect) {
                let correctMessage = '';
                switch(lessonNum) {
                    case 1:
                        correctMessage = '‚úÖ Spr√°vnƒõ! Re√°ln√° sazba = 4% - 6% = -2%. Va≈°e pen√≠ze ztr√°cej√≠ kupn√≠ s√≠lu.';
                        break;
                    case 2:
                        correctMessage = '‚úÖ Spr√°vnƒõ! Kdy≈æ ƒåNB zv√Ω≈°√≠ sazbu, banky si p≈Øjƒçuj√≠ dr√°≈æ, tak≈æe i hypot√©ky zdra≈æuj√≠.';
                        break;
                    case 3:
                        correctMessage = '‚úÖ Spr√°vnƒõ! RPSN zahrnuje v≈°echny n√°klady, tak≈æe jen podle nƒõj pozn√°te skuteƒçnƒõ levnƒõj≈°√≠ p≈Øjƒçku.';
                        break;
                    case 4:
                        correctMessage = '‚úÖ Spr√°vnƒõ! Pravidlo 72: 72 √∑ 8 = 9 let. Slo≈æen√© √∫roƒçen√≠ je rychlej≈°√≠ ne≈æ jednoduch√© poƒç√≠t√°n√≠!';
                        break;
                    case 5:
                        correctMessage = '‚úÖ Spr√°vnƒõ! V≈ædy nejd≈ô√≠ve spla≈•te vysoko√∫roƒçen√© dluhy. Garantovan√° "√∫spora" 15% je lep≈°√≠ ne≈æ nejist√Ω v√Ωnos 7%.';
                        break;
                }
                resultDiv.innerHTML = `<p class="font-medium text-green-700">${correctMessage}</p>`;
                resultDiv.classList.remove('hidden');
                markActionComplete(lessonNum, 'quiz');
            } else {
                resultDiv.innerHTML = '<p class="font-medium text-red-700">‚ùå Zkuste to znovu! P≈ôem√Ω≈°lejte o vztahu mezi sazbami a n√°klady.</p>';
                resultDiv.classList.remove('hidden');
                
                setTimeout(() => {
                    options.forEach(option => {
                        option.disabled = false;
                        option.classList.remove('opacity-50');
                    });
                    resultDiv.classList.add('hidden');
                }, 3000);
            }
        }

        function restartQuiz(lessonNum) {
            const resultDiv = document.getElementById(`quiz-${lessonNum}-result`);
            const options = document.querySelectorAll(`#quiz-${lessonNum} .quiz-option`);
            
            resultDiv.classList.add('hidden');
            options.forEach(option => {
                option.disabled = false;
                option.classList.remove('opacity-50');
            });
        }

        // Lesson 2 specific functions
        function calculateRisk() {
            const selectedType = document.querySelector('input[name="client-type"]:checked');
            if (!selectedType) return;
            
            const riskResult = document.getElementById('risk-result');
            const clientRate = document.getElementById('client-rate');
            const riskExplanation = document.getElementById('risk-explanation');
            
            let rate, explanation, color;
            
            switch(selectedType.value) {
                case 'safe':
                    rate = '4.2%';
                    explanation = 'N√≠zk√© riziko = ni≈æ≈°√≠ sazba. Banka vƒõ≈ô√≠, ≈æe p≈Øjƒçku splat√≠te.';
                    color = 'text-green-600';
                    break;
                case 'medium':
                    rate = '6.5%';
                    explanation = 'St≈ôedn√≠ riziko = pr≈Ømƒõrn√° sazba. Banka si √∫ƒçtuje rezervu na mo≈æn√© probl√©my.';
                    color = 'text-yellow-600';
                    break;
                case 'risky':
                    rate = '12.8%';
                    explanation = 'Vysok√© riziko = vysok√° sazba. Banka si chr√°n√≠ p≈ôed mo≈æn√Ωmi ztr√°tami.';
                    color = 'text-red-600';
                    break;
            }
            
            clientRate.textContent = rate;
            clientRate.className = `text-3xl font-bold mb-2 ${color}`;
            riskExplanation.textContent = explanation;
            riskResult.classList.remove('hidden');
            
            markActionComplete(2, 'risk-calculator');
        }

        let bankStates = {
            bank1: { active: true, baseRate: 5.5 },
            bank2: { active: true, baseRate: 5.2 },
            bank3: { active: true, baseRate: 5.8 }
        };

        function toggleBank(bankId) {
            bankStates[bankId].active = !bankStates[bankId].active;
            updateBankDisplay();
            markActionComplete(2, 'competition-game');
        }

        function updateBankDisplay() {
            let totalRate = 0;
            let activeCount = 0;
            
            Object.keys(bankStates).forEach(bankId => {
                const bank = bankStates[bankId];
                const statusElement = document.getElementById(`${bankId}-status`);
                const rateElement = document.getElementById(`${bankId}-rate`);
                const cardElement = statusElement.closest('.bank-card');
                
                if (bank.active) {
                    statusElement.textContent = 'Aktivn√≠';
                    cardElement.classList.remove('opacity-50');
                    totalRate += bank.baseRate;
                    activeCount++;
                } else {
                    statusElement.textContent = 'Neaktivn√≠';
                    cardElement.classList.add('opacity-50');
                }
            });
            
            // Update average rate
            const averageRate = activeCount > 0 ? (totalRate / activeCount).toFixed(1) : 0;
            const averageElement = document.getElementById('average-rate');
            
            if (activeCount === 1) {
                averageElement.textContent = `${averageRate}% (monopol - vysok√© sazby!)`;
            } else if (activeCount === 3) {
                averageElement.textContent = `${averageRate}% (konkurence - lep≈°√≠ sazby!)`;
            } else {
                averageElement.textContent = `${averageRate}%`;
            }
        }

        // Lesson 3 specific functions
        function calculateRPSN() {
            const amount = parseFloat(document.getElementById('loan-amount').value);
            const rate = parseFloat(document.getElementById('loan-rate').value);
            const years = parseFloat(document.getElementById('loan-years').value);
            const setupFee = parseFloat(document.getElementById('setup-fee').value);
            const monthlyFee = parseFloat(document.getElementById('monthly-fee').value);
            
            // Validation
            if (years <= 0) {
                alert('‚ö†Ô∏è Doba splatnosti mus√≠ b√Ωt vƒõt≈°√≠ ne≈æ 0 let!');
                return;
            }
            
            if (setupFee + (monthlyFee * years * 12) >= amount) {
                alert('‚ö†Ô∏è Pozor! Poplatky jsou vy≈°≈°√≠ ne≈æ jistina p≈Øjƒçky. Zkontrolujte zadan√© hodnoty.');
                return;
            }
            
            const months = years * 12;
            const monthlyRate = rate / 100 / 12;
            
            // Calculate monthly payment (principal + interest)
            const monthlyPayment = amount * (monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
            
            // Total cost including fees
            const totalInterest = (monthlyPayment * months) - amount;
            const totalFees = setupFee + (monthlyFee * months);
            const totalCost = amount + totalInterest + totalFees;
            
            // Approximate RPSN calculation
            const rpsn = ((totalCost / amount - 1) / years) * 100;
            
            document.getElementById('display-rate').textContent = `${rate}%`;
            document.getElementById('calculated-rpsn').textContent = `${rpsn.toFixed(1)}%`;
            document.getElementById('total-cost').textContent = `${totalCost.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('monthly-payment').textContent = `${(monthlyPayment + monthlyFee).toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('rpsn-result').classList.remove('hidden');
            
            markActionComplete(3, 'rpsn-calculator');
        }

        function selectLoan(loanId) {
            // Simulate RPSN calculation for comparison
            const loans = {
                loan1: { rate: 4.5, fee: 5000, rpsn: 5.8 },
                loan2: { rate: 6.0, fee: 0, rpsn: 6.0 },
                loan3: { rate: 5.2, fee: 1500, rpsn: 5.5 }
            };
            
            // Update all loan displays
            Object.keys(loans).forEach(id => {
                document.getElementById(`${id}-rpsn`).textContent = `RPSN: ${loans[id].rpsn}%`;
            });
            
            // Find best loan
            const bestLoan = Object.keys(loans).reduce((a, b) => loans[a].rpsn < loans[b].rpsn ? a : b);
            const bestLoanName = bestLoan === 'loan1' ? 'Banka A' : bestLoan === 'loan2' ? 'Banka B' : 'Banka C';
            
            document.getElementById('best-loan').textContent = `Nejlevnƒõj≈°√≠ je ${bestLoanName} s RPSN ${loans[bestLoan].rpsn}%`;
            document.getElementById('comparison-result').classList.remove('hidden');
            
            markActionComplete(3, 'loan-comparison');
        }

        // Lesson 4 specific functions
        function runCompoundSimulation() {
            const initial = parseFloat(document.getElementById('initial-amount').value);
            const monthly = parseFloat(document.getElementById('monthly-deposit').value);
            const rate = parseFloat(document.getElementById('compound-rate').value) / 100;
            const years = parseFloat(document.getElementById('years-slider').value);
            
            const months = years * 12;
            const monthlyRate = rate / 12;
            
            let balance = initial;
            let totalInvested = initial;
            
            for (let i = 0; i < months; i++) {
                balance = balance * (1 + monthlyRate) + monthly;
                totalInvested += monthly;
            }
            
            const totalInterest = balance - totalInvested;
            
            document.getElementById('result-years').textContent = years;
            document.getElementById('total-invested').textContent = `${totalInvested.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('total-interest').textContent = `${totalInterest.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('final-amount').textContent = `${balance.toLocaleString('cs-CZ')} Kƒç`;
            
            // Generate insight
            const interestRatio = totalInterest / totalInvested;
            let insight = '';
            if (interestRatio > 1) {
                insight = '√öroky p≈ôevy≈°uj√≠ va≈°e vklady! To je s√≠la slo≈æen√©ho √∫roƒçen√≠.';
            } else if (interestRatio > 0.5) {
                insight = '√öroky tvo≈ô√≠ v√≠ce ne≈æ polovinu v√Ωsledku. ƒåas je v√°≈° p≈ô√≠tel!';
            } else {
                insight = 'Zkuste del≈°√≠ obdob√≠ nebo vy≈°≈°√≠ sazbu pro vƒõt≈°√≠ efekt slo≈æen√©ho √∫roƒçen√≠.';
            }
            
            document.getElementById('compound-insight').textContent = insight;
            document.getElementById('compound-result').classList.remove('hidden');
            
            markActionComplete(4, 'compound-simulator');
        }

        function calculateRule72(rate) {
            const years = Math.round(72 / rate);
            const explanation = `P≈ôi ${rate}% √∫roku se va≈°e pen√≠ze zdvojn√°sob√≠ za ${years} let. Pravidlo 72 funguje!`;
            
            document.getElementById('rule72-explanation').classList.remove('hidden');
            document.getElementById('rule72-text').textContent = explanation;
            
            markActionComplete(4, 'rule-72');
        }

        // Lesson 5 specific functions
        function calculateDebtVsInvestment() {
            const debtRate = parseFloat(document.getElementById('debt-rate').value);
            const investmentReturn = parseFloat(document.getElementById('investment-return').value);
            const availableMoney = parseFloat(document.getElementById('available-money').value);
            
            const debtSavings = availableMoney * (debtRate / 100);
            const investmentGain = availableMoney * (investmentReturn / 100);
            
            let recommendation, explanation, color;
            
            if (debtRate > investmentReturn) {
                recommendation = 'üí° Spla≈•te dluh!';
                explanation = `√örok na dluhu (${debtRate}%) je vy≈°≈°√≠ ne≈æ oƒçek√°van√Ω v√Ωnos (${investmentReturn}%). Spl√°cen√≠ dluhu je garantovan√° "investice".`;
                color = 'text-red-600';
            } else {
                recommendation = 'üìà Investujte!';
                explanation = `Oƒçek√°van√Ω v√Ωnos (${investmentReturn}%) je vy≈°≈°√≠ ne≈æ √∫rok na dluhu (${debtRate}%). Ale pozor na riziko!`;
                color = 'text-green-600';
            }
            
            document.getElementById('recommendation').textContent = recommendation;
            document.getElementById('recommendation').className = `text-lg font-bold mb-3 ${color}`;
            document.getElementById('recommendation-explanation').textContent = explanation;
            document.getElementById('debt-savings').textContent = `${debtSavings.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('investment-gain').textContent = `${investmentGain.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('debt-investment-result').classList.remove('hidden');
            
            markActionComplete(5, 'debt-investment');
        }

        function updateGoalAmount() {
            const goal = document.getElementById('savings-goal').value;
            const amounts = {
                car: 500000,
                house: 2000000,
                vacation: 50000,
                custom: document.getElementById('goal-amount').value
            };
            
            if (goal !== 'custom') {
                document.getElementById('goal-amount').value = amounts[goal];
            }
        }

        function calculateSavingsGoal() {
            const goalAmount = parseFloat(document.getElementById('goal-amount').value);
            const years = parseFloat(document.getElementById('goal-years').value);
            const returnRate = parseFloat(document.getElementById('goal-return').value) / 100;
            
            const months = years * 12;
            const monthlyRate = returnRate / 12;
            
            // Calculate required monthly payment for future value
            let monthlyPayment;
            if (monthlyRate === 0) {
                monthlyPayment = goalAmount / months;
            } else {
                monthlyPayment = goalAmount * monthlyRate / (Math.pow(1 + monthlyRate, months) - 1);
            }
            
            const goalName = document.getElementById('savings-goal').selectedOptions[0].text;
            
            document.getElementById('display-goal').textContent = `${goalAmount.toLocaleString('cs-CZ')} Kƒç`;
            document.getElementById('display-years').textContent = `${years} let`;
            document.getElementById('monthly-savings').textContent = `${monthlyPayment.toLocaleString('cs-CZ')} Kƒç`;
            
            // Generate tip
            let tip = '';
            if (monthlyPayment > 10000) {
                tip = 'Vysok√° mƒõs√≠ƒçn√≠ ƒç√°stka. Zva≈æte del≈°√≠ obdob√≠ nebo vy≈°≈°√≠ v√Ωnos.';
            } else if (monthlyPayment < 1000) {
                tip = 'Skvƒõl√©! Tato ƒç√°stka je snadno dosa≈æiteln√°.';
            } else {
                tip = 'Rozumn√° mƒõs√≠ƒçn√≠ ƒç√°stka. Zaƒçnƒõte co nejd≈ô√≠ve!';
            }
            
            document.getElementById('savings-tip').textContent = tip;
            document.getElementById('savings-goal-result').classList.remove('hidden');
            
            markActionComplete(5, 'savings-planner');
        }

        function finishCourse() {
            document.getElementById('course-completion').classList.remove('hidden');
            
            // Update all lesson statuses to completed
            for (let i = 1; i <= 5; i++) {
                updateLessonOverviewStatus(i, 'completed');
            }
            
            // Show final achievement
            showAchievement();
        }

        function showBonusCard() {
            const bonusCards = [
                "üí° Vƒõdƒõli jste, ≈æe Albert Einstein nazval slo≈æen√© √∫roƒçen√≠ \"osm√Ωm divem svƒõta\"?",
                "üéØ Pravidlo 72: Vydƒõlte 72 √∫rokovou sazbou a z√≠sk√°te roky pot≈ôebn√© k zdvojn√°soben√≠ penƒõz!",
                "üìà Re√°ln√° sazba v ƒåR byla v roce 2022 z√°porn√° kv≈Øli vysok√© inflaci.",
                "üí∞ 1% rozd√≠l v √∫roku za 30 let = des√≠tky tis√≠c korun rozd√≠lu!",
                "üè¶ RPSN mus√≠ b√Ωt podle z√°kona uvedena u v≈°ech p≈Øjƒçek vƒõt≈°√≠ch ne≈æ 20 000 Kƒç."
            ];
            
            const randomTip = bonusCards[Math.floor(Math.random() * bonusCards.length)];
            document.getElementById('bonus-content').textContent = randomTip;
            document.getElementById('bonus-card').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('bonus-card').classList.add('hidden');
            }, 8000);
        }

        function closeBonusCard() {
            document.getElementById('bonus-card').classList.add('hidden');
        }

        function showAchievement() {
            const badge = document.getElementById('achievement-badge');
            badge.classList.remove('hidden');
            badge.classList.add('celebration');
            
            setTimeout(() => {
                badge.classList.add('hidden');
                badge.classList.remove('celebration');
            }, 3000);
        }

        function showLessonCompletion(lessonNum) {
            // Create confetti
            createConfetti();
            
            // Show lesson badge
            const badges = {
                1: "üéØ √örok Master",
                2: "üè¶ Sazby Expert", 
                3: "üí≥ RPSN Guru",
                4: "üìà Slo≈æen√© Kouzlo",
                5: "üèÜ Finanƒçn√≠ Strat√©g"
            };
            
            showLessonBadge(badges[lessonNum]);
        }

        function createConfetti() {
            const colors = ['#f39c12', '#e74c3c', '#9b59b6', '#3498db', '#2ecc71'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        function showLessonBadge(badgeText) {
            const badge = document.createElement('div');
            badge.className = 'lesson-badge fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-yellow-400 text-black px-6 py-4 rounded-full shadow-lg z-50 text-lg font-bold';
            badge.textContent = badgeText;
            document.body.appendChild(badge);
            
            setTimeout(() => {
                badge.remove();
            }, 3000);
        }

        function updateCNBRate() {
            const cnbRate = parseFloat(document.getElementById('cnb-rate').value);
            const variableRate = 2.5 + cnbRate; // Base margin + CNB rate
            const payment = 20000 + (cnbRate * 1000); // Simplified payment calculation
            
            document.getElementById('cnb-rate-display').textContent = `${cnbRate.toFixed(1)}%`;
            document.getElementById('variable-rate').textContent = `${variableRate.toFixed(1)}%`;
            document.getElementById('variable-payment').textContent = `Spl√°tka: ${payment.toLocaleString('cs-CZ')} Kƒç`;
            
            markActionComplete(2, 'rate-types');
        }

        function showStickyCTA() {
            const totalProgress = Object.values(lessonProgress).reduce((a, b) => a + b, 0);
            const stickyCTA = document.getElementById('sticky-cta');
            
            if (totalProgress === 0 && currentLesson === 0) {
                stickyCTA.classList.remove('hidden');
            } else {
                stickyCTA.classList.add('hidden');
            }
        }

        // Event listeners
        document.getElementById('inflation-slider').addEventListener('input', updateInflationSlider);
        document.getElementById('years-slider').addEventListener('input', function() {
            document.getElementById('years-display').textContent = this.value;
        });
        
        // CNB rate slider
        if (document.getElementById('cnb-rate')) {
            document.getElementById('cnb-rate').addEventListener('input', updateCNBRate);
        }
        
        // Progress saving functions
        function saveProgress() {
            const progressData = {
                lessonProgress: lessonProgress,
                completedActions: completedActions,
                currentLesson: currentLesson
            };
            localStorage.setItem('urokovy-kurz-progress', JSON.stringify(progressData));
        }

        function loadProgress() {
            const saved = localStorage.getItem('urokovy-kurz-progress');
            if (saved) {
                const data = JSON.parse(saved);
                lessonProgress = data.lessonProgress || {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
                completedActions = data.completedActions || {1: [], 2: [], 3: [], 4: [], 5: []};
                
                // Update all progress displays
                for (let i = 1; i <= 5; i++) {
                    updateLessonProgress(i);
                    if (lessonProgress[i] >= 4) {
                        updateLessonOverviewStatus(i, 'completed');
                    } else if (lessonProgress[i] > 0) {
                        updateLessonOverviewStatus(i, 'started');
                    }
                }
            }
        }

        // Central Bank Game Variables
        let gameState = {
            cnbRate: 2.0,
            inflation: 3.5,
            growth: 2.1,
            unemployment: 4.2,
            quarter: 1,
            score: 85,
            events: []
        };

        let gameEvents = [
            {
                trigger: 'high_inflation',
                emoji: 'üî•',
                text: 'Inflace p≈ôekroƒçila 4%! Obƒçan√© protestuj√≠ proti drah√Ωm cen√°m.',
                effect: { inflation: 0.5, growth: -0.2 }
            },
            {
                trigger: 'recession_risk',
                emoji: 'üìâ',
                text: 'Ekonomika zpomaluje! Firmy propou≈°tƒõj√≠ zamƒõstnance.',
                effect: { growth: -0.8, unemployment: 0.5 }
            },
            {
                trigger: 'oil_shock',
                emoji: '‚õΩ',
                text: 'Ceny ropy prudce vzrostly! Inflace se zrychluje.',
                effect: { inflation: 1.2, growth: -0.3 }
            },
            {
                trigger: 'tech_boom',
                emoji: 'üíª',
                text: 'Technologick√Ω boom! Ekonomika roste rychleji.',
                effect: { growth: 0.8, unemployment: -0.3 }
            },
            {
                trigger: 'currency_crisis',
                emoji: 'üí±',
                text: 'Koruna oslabuje! Dovoz se zdra≈æuje.',
                effect: { inflation: 0.8, growth: -0.2 }
            }
        ];

        function startCentralBankGame() {
            document.getElementById('course-completion').classList.add('hidden');
            document.getElementById('central-bank-game').classList.remove('hidden');
            resetGame();
        }

        function resetGame() {
            gameState = {
                cnbRate: 2.0,
                inflation: 3.5,
                growth: 2.1,
                unemployment: 4.2,
                quarter: 1,
                score: 85,
                events: []
            };
            updateGameDisplay();
        }

        function changeCNBRate(change) {
            const newRate = Math.max(0, Math.min(15, gameState.cnbRate + change));
            const actualChange = newRate - gameState.cnbRate;
            gameState.cnbRate = newRate;
            
            // Show rate change animation
            showRateChangeIndicator(actualChange);
            
            // Create economic particles
            createEconomicParticles(actualChange > 0 ? 'up' : 'down');
            
            // Update economy based on rate change
            updateEconomyFromRateChange(actualChange);
            
            // Update display with animations
            updateGameDisplay();
            
            // Animate the CNB rate display
            const rateDisplay = document.getElementById('current-cnb-rate');
            rateDisplay.classList.add('pulse-animation');
            setTimeout(() => rateDisplay.classList.remove('pulse-animation'), 2000);
        }

        function updateEconomyFromRateChange(change) {
            // Higher rates -> lower inflation, lower growth, higher unemployment
            // Lower rates -> higher inflation, higher growth, lower unemployment
            
            const inflationChange = -change * 0.3 + (Math.random() - 0.5) * 0.2;
            const growthChange = -change * 0.4 + (Math.random() - 0.5) * 0.3;
            const unemploymentChange = change * 0.2 + (Math.random() - 0.5) * 0.1;
            
            gameState.inflation = Math.max(0, gameState.inflation + inflationChange);
            gameState.growth = Math.max(-2, Math.min(8, gameState.growth + growthChange));
            gameState.unemployment = Math.max(1, Math.min(15, gameState.unemployment + unemploymentChange));
            
            // Calculate score based on how close to targets
            calculateScore();
        }

        function calculateScore() {
            let score = 100;
            
            // Inflation target: 2% (¬±0.5% is perfect)
            const inflationDiff = Math.abs(gameState.inflation - 2);
            if (inflationDiff > 0.5) {
                score -= (inflationDiff - 0.5) * 15;
            }
            
            // Growth target: 2-3% is good
            if (gameState.growth < 1) {
                score -= (1 - gameState.growth) * 10;
            } else if (gameState.growth > 4) {
                score -= (gameState.growth - 4) * 8;
            }
            
            // Unemployment target: under 5% is good
            if (gameState.unemployment > 5) {
                score -= (gameState.unemployment - 5) * 12;
            }
            
            gameState.score = Math.max(0, Math.min(100, score));
        }

        function updateGameDisplay() {
            // Update main indicators
            document.getElementById('current-cnb-rate').textContent = `${gameState.cnbRate.toFixed(1)}%`;
            document.getElementById('game-inflation').textContent = `${gameState.inflation.toFixed(1)}%`;
            document.getElementById('game-growth').textContent = `${gameState.growth.toFixed(1)}%`;
            document.getElementById('game-unemployment').textContent = `${gameState.unemployment.toFixed(1)}%`;
            
            // Update detailed displays
            updateInflationCard();
            updateGrowthCard();
            updateUnemploymentCard();
            updateMarketReactions();
            updateScoreDisplay();
        }

        function updateInflationCard() {
            const card = document.getElementById('inflation-card');
            const emoji = document.getElementById('inflation-emoji');
            const display = document.getElementById('inflation-display');
            const bar = document.getElementById('inflation-bar');
            const status = document.getElementById('inflation-status');
            
            display.textContent = `${gameState.inflation.toFixed(1)}%`;
            bar.style.width = `${Math.min(100, (gameState.inflation / 5) * 100)}%`;
            
            if (gameState.inflation < 1.5) {
                emoji.textContent = '‚ùÑÔ∏è';
                status.textContent = 'Deflace!';
                card.style.borderColor = '#3b82f6';
                bar.className = 'bg-blue-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-blue-600';
                card.classList.add('shake-animation');
            } else if (gameState.inflation <= 2.5) {
                emoji.textContent = '‚úÖ';
                status.textContent = 'V c√≠li';
                card.style.borderColor = '#10b981';
                bar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-green-600';
                card.classList.add('glow-animation');
            } else if (gameState.inflation <= 4) {
                emoji.textContent = 'üî•';
                status.textContent = 'Nad c√≠lem';
                card.style.borderColor = '#f59e0b';
                bar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-yellow-600';
            } else {
                emoji.textContent = 'üö®';
                status.textContent = 'Krize!';
                card.style.borderColor = '#ef4444';
                bar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-red-600';
                card.classList.add('shake-animation');
            }
            
            setTimeout(() => {
                card.classList.remove('shake-animation', 'glow-animation');
            }, 1500);
        }

        function updateGrowthCard() {
            const card = document.getElementById('growth-card');
            const emoji = document.getElementById('growth-emoji');
            const display = document.getElementById('growth-display');
            const bar = document.getElementById('growth-bar');
            const status = document.getElementById('growth-status');
            
            display.textContent = `${gameState.growth.toFixed(1)}%`;
            bar.style.width = `${Math.max(0, Math.min(100, ((gameState.growth + 2) / 6) * 100))}%`;
            
            if (gameState.growth < 0) {
                emoji.textContent = 'üìâ';
                status.textContent = 'Recese';
                card.style.borderColor = '#ef4444';
                bar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-red-600';
                card.classList.add('shake-animation');
            } else if (gameState.growth <= 1) {
                emoji.textContent = 'üêå';
                status.textContent = 'Pomal√Ω r≈Øst';
                card.style.borderColor = '#f59e0b';
                bar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-yellow-600';
            } else if (gameState.growth <= 3) {
                emoji.textContent = 'üìà';
                status.textContent = 'Zdrav√Ω r≈Øst';
                card.style.borderColor = '#10b981';
                bar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-green-600';
                card.classList.add('glow-animation');
            } else {
                emoji.textContent = 'üöÄ';
                status.textContent = 'P≈ôeh≈ô√°t√≠';
                card.style.borderColor = '#8b5cf6';
                bar.className = 'bg-purple-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-purple-600';
            }
            
            setTimeout(() => {
                card.classList.remove('shake-animation', 'glow-animation');
            }, 1500);
        }

        function updateUnemploymentCard() {
            const card = document.getElementById('unemployment-card');
            const emoji = document.getElementById('unemployment-emoji');
            const display = document.getElementById('unemployment-display');
            const bar = document.getElementById('unemployment-bar');
            const status = document.getElementById('unemployment-status');
            
            display.textContent = `${gameState.unemployment.toFixed(1)}%`;
            bar.style.width = `${Math.min(100, (gameState.unemployment / 10) * 100)}%`;
            
            if (gameState.unemployment <= 3) {
                emoji.textContent = 'üí™';
                status.textContent = 'V√Ωborn√°';
                card.style.borderColor = '#10b981';
                bar.className = 'bg-green-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-green-600';
                card.classList.add('glow-animation');
            } else if (gameState.unemployment <= 5) {
                emoji.textContent = 'üë•';
                status.textContent = 'P≈ôijateln√°';
                card.style.borderColor = '#f59e0b';
                bar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-yellow-600';
            } else if (gameState.unemployment <= 8) {
                emoji.textContent = 'üòü';
                status.textContent = 'Vysok√°';
                card.style.borderColor = '#f97316';
                bar.className = 'bg-orange-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-orange-600';
            } else {
                emoji.textContent = 'üö®';
                status.textContent = 'Krize!';
                card.style.borderColor = '#ef4444';
                bar.className = 'bg-red-500 h-2 rounded-full transition-all duration-1000';
                display.className = 'text-2xl font-bold mb-2 text-red-600';
                card.classList.add('shake-animation');
            }
            
            setTimeout(() => {
                card.classList.remove('shake-animation', 'glow-animation');
            }, 1500);
        }

        function updateMarketReactions() {
            // Mortgage rates = CNB rate + margin
            const mortgageRate = gameState.cnbRate + 2.5;
            document.getElementById('mortgage-rate').textContent = `${mortgageRate.toFixed(1)}%`;
            
            // Savings rates = CNB rate - margin
            const savingsRate = Math.max(0.1, gameState.cnbRate - 0.5);
            document.getElementById('savings-rate').textContent = `${savingsRate.toFixed(1)}%`;
            
            // Business loans = CNB rate + higher margin
            const businessRate = gameState.cnbRate + 4.2;
            document.getElementById('business-loans').textContent = `${businessRate.toFixed(1)}%`;
            
            // Currency strength (simplified)
            const currencyChange = (gameState.cnbRate - 2) * 0.3;
            document.getElementById('currency-strength').textContent = `${currencyChange >= 0 ? '+' : ''}${currencyChange.toFixed(1)}%`;
            
            // Update trends
            const rateChange = gameState.cnbRate > 2 ? 'up' : 'down';
            document.getElementById('housing-trend').textContent = rateChange === 'up' ? 'üìà Rostou' : 'üìâ Klesaj√≠';
            document.getElementById('savings-trend').textContent = rateChange === 'up' ? 'üìà Rostou' : 'üìâ Klesaj√≠';
            document.getElementById('business-trend').textContent = rateChange === 'up' ? 'üìà Dra≈æ≈°√≠' : 'üìâ Levnƒõj≈°√≠';
            document.getElementById('currency-trend').textContent = currencyChange > 0 ? 'üí™ Silnƒõj≈°√≠' : 'üìâ Slab≈°√≠';
            
            // Animate market cards
            const markets = ['housing-market', 'savings-market', 'business-market', 'currency-market'];
            markets.forEach((market, index) => {
                setTimeout(() => {
                    document.getElementById(market).classList.add('pulse-animation');
                    setTimeout(() => {
                        document.getElementById(market).classList.remove('pulse-animation');
                    }, 1000);
                }, index * 200);
            });
        }

        function updateScoreDisplay() {
            document.getElementById('game-score').textContent = Math.round(gameState.score);
            document.getElementById('game-quarters').textContent = gameState.quarter;
            document.getElementById('score-bar').style.width = `${gameState.score}%`;
            
            let feedback = '';
            if (gameState.score >= 90) {
                feedback = 'üèÜ V√Ωborn√° pr√°ce! Jste ekonomick√Ω g√©nius!';
            } else if (gameState.score >= 75) {
                feedback = 'üëç Dobr√° pr√°ce! Ekonomika je stabiln√≠.';
            } else if (gameState.score >= 60) {
                feedback = '‚ö†Ô∏è Pr≈Ømƒõrn√©. Zkuste l√©pe vyv√°≈æit c√≠le.';
            } else if (gameState.score >= 40) {
                feedback = 'üò∞ Probl√©my! Ekonomika je nestabiln√≠.';
            } else {
                feedback = 'üö® Krize! Okam≈æitƒõ jednejte!';
            }
            
            document.getElementById('performance-feedback').textContent = feedback;
        }

        function nextQuarter() {
            gameState.quarter++;
            
            // Random economic events
            if (Math.random() < 0.4) {
                triggerRandomEvent();
            }
            
            // Natural economic fluctuations
            gameState.inflation += (Math.random() - 0.5) * 0.3;
            gameState.growth += (Math.random() - 0.5) * 0.4;
            gameState.unemployment += (Math.random() - 0.5) * 0.2;
            
            // Bounds checking
            gameState.inflation = Math.max(0, gameState.inflation);
            gameState.growth = Math.max(-2, Math.min(8, gameState.growth));
            gameState.unemployment = Math.max(1, Math.min(15, gameState.unemployment));
            
            calculateScore();
            updateGameDisplay();
            
            // Animate quarter transition
            const quarterDisplay = document.getElementById('game-quarters');
            quarterDisplay.classList.add('celebration');
            setTimeout(() => quarterDisplay.classList.remove('celebration'), 600);
        }

        function triggerRandomEvent() {
            const availableEvents = gameEvents.filter(event => {
                if (event.trigger === 'high_inflation' && gameState.inflation < 4) return true;
                if (event.trigger === 'recession_risk' && gameState.growth < 1) return true;
                return Math.random() < 0.3;
            });
            
            if (availableEvents.length === 0) return;
            
            const event = availableEvents[Math.floor(Math.random() * availableEvents.length)];
            
            // Apply event effects
            if (event.effect.inflation) gameState.inflation += event.effect.inflation;
            if (event.effect.growth) gameState.growth += event.effect.growth;
            if (event.effect.unemployment) gameState.unemployment += event.effect.unemployment;
            
            // Show event
            showGameEvent(event);
        }

        function showGameEvent(event) {
            document.getElementById('event-emoji').textContent = event.emoji;
            document.getElementById('event-text').textContent = event.text;
            document.getElementById('game-events').classList.remove('hidden');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                document.getElementById('game-events').classList.add('hidden');
            }, 5000);
        }

        function showRateChangeIndicator(change) {
            const indicator = document.createElement('div');
            indicator.className = 'rate-change-indicator';
            indicator.textContent = change > 0 ? `+${change.toFixed(1)}%` : `${change.toFixed(1)}%`;
            indicator.style.color = change > 0 ? '#10b981' : '#ef4444';
            
            const container = document.getElementById('current-cnb-rate').parentElement;
            container.style.position = 'relative';
            container.appendChild(indicator);
            
            setTimeout(() => {
                indicator.remove();
            }, 2000);
        }

        function createEconomicParticles(direction) {
            const container = document.getElementById('central-bank-game');
            const colors = direction === 'up' ? ['#10b981', '#059669'] : ['#ef4444', '#dc2626'];
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'economic-particle';
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.left = Math.random() * container.offsetWidth + 'px';
                    particle.style.top = container.offsetHeight * 0.3 + 'px';
                    
                    container.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // Initialize
        loadProgress();
        updateInflationSlider();
        updateBankDisplay();
        showStickyCTA();
        
        // Update sticky CTA on scroll
        window.addEventListener('scroll', showStickyCTA);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9863ce35d5123009',t:'MTc1OTA2ODQyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
